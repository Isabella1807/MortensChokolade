(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _l(e,t){const n=Object.create(null),r=e.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const mt={},ur=[],Ae=()=>{},sg=()=>!1,ig=/^on[^a-z]/,to=e=>ig.test(e),yl=e=>e.startsWith("onUpdate:"),Bt=Object.assign,El=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},og=Object.prototype.hasOwnProperty,et=(e,t)=>og.call(e,t),K=Array.isArray,hr=e=>no(e)==="[object Map]",Yh=e=>no(e)==="[object Set]",X=e=>typeof e=="function",St=e=>typeof e=="string",eo=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",Jh=e=>(Et(e)||X(e))&&X(e.then)&&X(e.catch),Zh=Object.prototype.toString,no=e=>Zh.call(e),ag=e=>no(e).slice(8,-1),tf=e=>no(e)==="[object Object]",vl=e=>St(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,yi=_l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ro=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},lg=/-(\w)/g,qe=ro(e=>e.replace(lg,(t,n)=>n?n.toUpperCase():"")),cg=/\B([A-Z])/g,Vr=ro(e=>e.replace(cg,"-$1").toLowerCase()),so=ro(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ko=ro(e=>e?`on${so(e)}`:""),$n=(e,t)=>!Object.is(e,t),Ei=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Si=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},va=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Kc;const Ta=()=>Kc||(Kc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Tl(e){if(K(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=St(r)?dg(r):Tl(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(St(e)||Et(e))return e}const ug=/;(?![^(]*\))/g,hg=/:([^]+)/,fg=/\/\*[^]*?\*\//g;function dg(e){const t={};return e.replace(fg,"").split(ug).forEach(n=>{if(n){const r=n.split(hg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function wl(e){let t="";if(St(e))t=e;else if(K(e))for(let n=0;n<e.length;n++){const r=wl(e[n]);r&&(t+=r+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const pg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mg=_l(pg);function ef(e){return!!e||e===""}const vi=e=>St(e)?e:e==null?"":K(e)||Et(e)&&(e.toString===Zh||!X(e.toString))?JSON.stringify(e,nf,2):String(e),nf=(e,t)=>t&&t.__v_isRef?nf(e,t.value):hr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:Yh(t)?{[`Set(${t.size})`]:[...t.values()]}:Et(t)&&!K(t)&&!tf(t)?String(t):t;let ve;class gg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ve,!t&&ve&&(this.index=(ve.scopes||(ve.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=ve;try{return ve=this,t()}finally{ve=n}}}on(){ve=this}off(){ve=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function _g(e,t=ve){t&&t.active&&t.effects.push(e)}function yg(){return ve}const Il=e=>{const t=new Set(e);return t.w=0,t.n=0,t},rf=e=>(e.w&En)>0,sf=e=>(e.n&En)>0,Eg=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=En},vg=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const s=t[r];rf(s)&&!sf(s)?s.delete(e):t[n++]=s,s.w&=~En,s.n&=~En}t.length=n}},wa=new WeakMap;let Xr=0,En=1;const Ia=30;let we;const Ln=Symbol(""),Aa=Symbol("");class Al{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,_g(this,r)}run(){if(!this.active)return this.fn();let t=we,n=fn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=we,we=this,fn=!0,En=1<<++Xr,Xr<=Ia?Eg(this):Wc(this),this.fn()}finally{Xr<=Ia&&vg(this),En=1<<--Xr,we=this.parent,fn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){we===this?this.deferStop=!0:this.active&&(Wc(this),this.onStop&&this.onStop(),this.active=!1)}}function Wc(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let fn=!0;const of=[];function Dr(){of.push(fn),fn=!1}function xr(){const e=of.pop();fn=e===void 0?!0:e}function le(e,t,n){if(fn&&we){let r=wa.get(e);r||wa.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Il()),af(s)}}function af(e,t){let n=!1;Xr<=Ia?sf(e)||(e.n|=En,n=!rf(e)):n=!e.has(we),n&&(e.add(we),we.deps.push(e))}function Qe(e,t,n,r,s,i){const o=wa.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&K(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!eo(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":K(e)?vl(n)&&a.push(o.get("length")):(a.push(o.get(Ln)),hr(e)&&a.push(o.get(Aa)));break;case"delete":K(e)||(a.push(o.get(Ln)),hr(e)&&a.push(o.get(Aa)));break;case"set":hr(e)&&a.push(o.get(Ln));break}if(a.length===1)a[0]&&Ra(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Ra(Il(l))}}function Ra(e,t){const n=K(e)?e:[...e];for(const r of n)r.computed&&Gc(r);for(const r of n)r.computed||Gc(r)}function Gc(e,t){(e!==we||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Tg=_l("__proto__,__v_isRef,__isVue"),lf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(eo)),Qc=wg();function wg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=st(this);for(let i=0,o=this.length;i<o;i++)le(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(st)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Dr();const r=st(this)[t].apply(this,n);return xr(),r}}),e}function Ig(e){const t=st(this);return le(t,"has",e),t.hasOwnProperty(e)}class cf{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw"&&r===(s?i?Mg:df:i?ff:hf).get(t))return t;const o=K(t);if(!s){if(o&&et(Qc,n))return Reflect.get(Qc,n,r);if(n==="hasOwnProperty")return Ig}const a=Reflect.get(t,n,r);return(eo(n)?lf.has(n):Tg(n))||(s||le(t,"get",n),i)?a:Wt(a)?o&&vl(n)?a:a.value:Et(a)?s?mf(a):oo(a):a}}class uf extends cf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(_r(i)&&Wt(i)&&!Wt(r))return!1;if(!this._shallow&&(!ki(r)&&!_r(r)&&(i=st(i),r=st(r)),!K(t)&&Wt(i)&&!Wt(r)))return i.value=r,!0;const o=K(t)&&vl(n)?Number(n)<t.length:et(t,n),a=Reflect.set(t,n,r,s);return t===st(s)&&(o?$n(r,i)&&Qe(t,"set",n,r):Qe(t,"add",n,r)),a}deleteProperty(t,n){const r=et(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Qe(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!eo(n)||!lf.has(n))&&le(t,"has",n),r}ownKeys(t){return le(t,"iterate",K(t)?"length":Ln),Reflect.ownKeys(t)}}class Ag extends cf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Rg=new uf,Cg=new Ag,bg=new uf(!0),Rl=e=>e,io=e=>Reflect.getPrototypeOf(e);function ei(e,t,n=!1,r=!1){e=e.__v_raw;const s=st(e),i=st(t);n||($n(t,i)&&le(s,"get",t),le(s,"get",i));const{has:o}=io(s),a=r?Rl:n?Pl:ds;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function ni(e,t=!1){const n=this.__v_raw,r=st(n),s=st(e);return t||($n(e,s)&&le(r,"has",e),le(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function ri(e,t=!1){return e=e.__v_raw,!t&&le(st(e),"iterate",Ln),Reflect.get(e,"size",e)}function Xc(e){e=st(e);const t=st(this);return io(t).has.call(t,e)||(t.add(e),Qe(t,"add",e,e)),this}function Yc(e,t){t=st(t);const n=st(this),{has:r,get:s}=io(n);let i=r.call(n,e);i||(e=st(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?$n(t,o)&&Qe(n,"set",e,t):Qe(n,"add",e,t),this}function Jc(e){const t=st(this),{has:n,get:r}=io(t);let s=n.call(t,e);s||(e=st(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Qe(t,"delete",e,void 0),i}function Zc(){const e=st(this),t=e.size!==0,n=e.clear();return t&&Qe(e,"clear",void 0,void 0),n}function si(e,t){return function(r,s){const i=this,o=i.__v_raw,a=st(o),l=t?Rl:e?Pl:ds;return!e&&le(a,"iterate",Ln),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function ii(e,t,n){return function(...r){const s=this.__v_raw,i=st(s),o=hr(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?Rl:t?Pl:ds;return!t&&le(i,"iterate",l?Aa:Ln),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function on(e){return function(...t){return e==="delete"?!1:this}}function Pg(){const e={get(i){return ei(this,i)},get size(){return ri(this)},has:ni,add:Xc,set:Yc,delete:Jc,clear:Zc,forEach:si(!1,!1)},t={get(i){return ei(this,i,!1,!0)},get size(){return ri(this)},has:ni,add:Xc,set:Yc,delete:Jc,clear:Zc,forEach:si(!1,!0)},n={get(i){return ei(this,i,!0)},get size(){return ri(this,!0)},has(i){return ni.call(this,i,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:si(!0,!1)},r={get(i){return ei(this,i,!0,!0)},get size(){return ri(this,!0)},has(i){return ni.call(this,i,!0)},add:on("add"),set:on("set"),delete:on("delete"),clear:on("clear"),forEach:si(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ii(i,!1,!1),n[i]=ii(i,!0,!1),t[i]=ii(i,!1,!0),r[i]=ii(i,!0,!0)}),[e,n,t,r]}const[Sg,kg,Vg,Dg]=Pg();function Cl(e,t){const n=t?e?Dg:Vg:e?kg:Sg;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(et(n,s)&&s in r?n:r,s,i)}const xg={get:Cl(!1,!1)},Ng={get:Cl(!1,!0)},Og={get:Cl(!0,!1)},hf=new WeakMap,ff=new WeakMap,df=new WeakMap,Mg=new WeakMap;function Lg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fg(e){return e.__v_skip||!Object.isExtensible(e)?0:Lg(ag(e))}function oo(e){return _r(e)?e:bl(e,!1,Rg,xg,hf)}function pf(e){return bl(e,!1,bg,Ng,ff)}function mf(e){return bl(e,!0,Cg,Og,df)}function bl(e,t,n,r,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Fg(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function fr(e){return _r(e)?fr(e.__v_raw):!!(e&&e.__v_isReactive)}function _r(e){return!!(e&&e.__v_isReadonly)}function ki(e){return!!(e&&e.__v_isShallow)}function gf(e){return fr(e)||_r(e)}function st(e){const t=e&&e.__v_raw;return t?st(t):e}function _f(e){return Si(e,"__v_skip",!0),e}const ds=e=>Et(e)?oo(e):e,Pl=e=>Et(e)?mf(e):e;function yf(e){fn&&we&&(e=st(e),af(e.dep||(e.dep=Il())))}function Ef(e,t){e=st(e);const n=e.dep;n&&Ra(n)}function Wt(e){return!!(e&&e.__v_isRef===!0)}function Nr(e){return vf(e,!1)}function Ug(e){return vf(e,!0)}function vf(e,t){return Wt(e)?e:new Bg(e,t)}class Bg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:st(t),this._value=n?t:ds(t)}get value(){return yf(this),this._value}set value(t){const n=this.__v_isShallow||ki(t)||_r(t);t=n?t:st(t),$n(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ds(t),Ef(this))}}function Xe(e){return Wt(e)?e.value:e}const $g={get:(e,t,n)=>Xe(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Wt(s)&&!Wt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Tf(e){return fr(e)?e:new Proxy(e,$g)}class jg{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Al(t,()=>{this._dirty||(this._dirty=!0,Ef(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=st(this);return yf(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function qg(e,t,n=!1){let r,s;const i=X(e);return i?(r=e,s=Ae):(r=e.get,s=e.set),new jg(r,s,i||!s,n)}function dn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){ao(i,t,n)}return s}function Re(e,t,n,r){if(X(e)){const i=dn(e,t,n,r);return i&&Jh(i)&&i.catch(o=>{ao(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(Re(e[i],t,n,r));return s}function ao(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=n;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){dn(l,null,10,[e,o,a]);return}}Hg(e,n,s,r)}function Hg(e,t,n,r=!0){console.error(e)}let ps=!1,Ca=!1;const Kt=[];let Oe=0;const dr=[];let We=null,Vn=0;const wf=Promise.resolve();let Sl=null;function If(e){const t=Sl||wf;return e?t.then(this?e.bind(this):e):t}function zg(e){let t=Oe+1,n=Kt.length;for(;t<n;){const r=t+n>>>1,s=Kt[r],i=ms(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function kl(e){(!Kt.length||!Kt.includes(e,ps&&e.allowRecurse?Oe+1:Oe))&&(e.id==null?Kt.push(e):Kt.splice(zg(e.id),0,e),Af())}function Af(){!ps&&!Ca&&(Ca=!0,Sl=wf.then(Cf))}function Kg(e){const t=Kt.indexOf(e);t>Oe&&Kt.splice(t,1)}function Wg(e){K(e)?dr.push(...e):(!We||!We.includes(e,e.allowRecurse?Vn+1:Vn))&&dr.push(e),Af()}function tu(e,t=ps?Oe+1:0){for(;t<Kt.length;t++){const n=Kt[t];n&&n.pre&&(Kt.splice(t,1),t--,n())}}function Rf(e){if(dr.length){const t=[...new Set(dr)];if(dr.length=0,We){We.push(...t);return}for(We=t,We.sort((n,r)=>ms(n)-ms(r)),Vn=0;Vn<We.length;Vn++)We[Vn]();We=null,Vn=0}}const ms=e=>e.id==null?1/0:e.id,Gg=(e,t)=>{const n=ms(e)-ms(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Cf(e){Ca=!1,ps=!0,Kt.sort(Gg);const t=Ae;try{for(Oe=0;Oe<Kt.length;Oe++){const n=Kt[Oe];n&&n.active!==!1&&dn(n,null,14)}}finally{Oe=0,Kt.length=0,Rf(),ps=!1,Sl=null,(Kt.length||dr.length)&&Cf()}}function Qg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||mt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||mt;f&&(s=n.map(m=>St(m)?m.trim():m)),h&&(s=n.map(va))}let a,l=r[a=Ko(t)]||r[a=Ko(qe(t))];!l&&i&&(l=r[a=Ko(Vr(t))]),l&&Re(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Re(c,e,6,s)}}function bf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!X(e)){const l=c=>{const u=bf(c,t,!0);u&&(a=!0,Bt(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(Et(e)&&r.set(e,null),null):(K(i)?i.forEach(l=>o[l]=null):Bt(o,i),Et(e)&&r.set(e,o),o)}function lo(e,t){return!e||!to(t)?!1:(t=t.slice(2).replace(/Once$/,""),et(e,t[0].toLowerCase()+t.slice(1))||et(e,Vr(t))||et(e,t))}let Gt=null,co=null;function Vi(e){const t=Gt;return Gt=e,co=e&&e.type.__scopeId||null,t}function Pf(e){co=e}function Sf(){co=null}function Te(e,t=Gt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&hu(-1);const i=Vi(t);let o;try{o=e(...s)}finally{Vi(i),r._d&&hu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Wo(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:m,ctx:y,inheritAttrs:I}=e;let w,P;const x=Vi(e);try{if(n.shapeFlag&4){const D=s||r;w=Ne(u.call(D,D,h,i,m,f,y)),P=l}else{const D=t;w=Ne(D.length>1?D(i,{attrs:l,slots:a,emit:c}):D(i,null)),P=t.props?l:Xg(l)}}catch(D){ss.length=0,ao(D,e,1),w=at(vn)}let B=w;if(P&&I!==!1){const D=Object.keys(P),{shapeFlag:ht}=B;D.length&&ht&7&&(o&&D.some(yl)&&(P=Yg(P,o)),B=yr(B,P))}return n.dirs&&(B=yr(B),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&(B.transition=n.transition),w=B,Vi(x),w}const Xg=e=>{let t;for(const n in e)(n==="class"||n==="style"||to(n))&&((t||(t={}))[n]=e[n]);return t},Yg=(e,t)=>{const n={};for(const r in e)(!yl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Jg(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?eu(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!lo(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?eu(r,o,c):!0:!!o;return!1}function eu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!lo(n,i))return!0}return!1}function Zg({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const kf="components";function Vl(e,t){return e_(kf,e,!0,t)||e}const t_=Symbol.for("v-ndc");function e_(e,t,n=!0,r=!1){const s=Gt||Mt;if(s){const i=s.type;if(e===kf){const a=K_(i,!1);if(a&&(a===t||a===qe(t)||a===so(qe(t))))return i}const o=nu(s[e]||i[e],t)||nu(s.appContext[e],t);return!o&&r?i:o}}function nu(e,t){return e&&(e[t]||e[qe(t)]||e[so(qe(t))])}const n_=e=>e.__isSuspense;function r_(e,t){t&&t.pendingBranch?K(e)?t.effects.push(...e):t.effects.push(e):Wg(e)}const oi={};function Ti(e,t,n){return Vf(e,t,n)}function Vf(e,t,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=mt){var a;const l=yg()===((a=Mt)==null?void 0:a.scope)?Mt:null;let c,u=!1,h=!1;if(Wt(e)?(c=()=>e.value,u=ki(e)):fr(e)?(c=()=>e,r=!0):K(e)?(h=!0,u=e.some(D=>fr(D)||ki(D)),c=()=>e.map(D=>{if(Wt(D))return D.value;if(fr(D))return xn(D);if(X(D))return dn(D,l,2)})):X(e)?t?c=()=>dn(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),Re(e,l,3,[m])}:c=Ae,t&&r){const D=c;c=()=>xn(D())}let f,m=D=>{f=x.onStop=()=>{dn(D,l,4)}},y;if(_s)if(m=Ae,t?n&&Re(t,l,3,[c(),h?[]:void 0,m]):c(),s==="sync"){const D=Q_();y=D.__watcherHandles||(D.__watcherHandles=[])}else return Ae;let I=h?new Array(e.length).fill(oi):oi;const w=()=>{if(x.active)if(t){const D=x.run();(r||u||(h?D.some((ht,pt)=>$n(ht,I[pt])):$n(D,I)))&&(f&&f(),Re(t,l,3,[D,I===oi?void 0:h&&I[0]===oi?[]:I,m]),I=D)}else x.run()};w.allowRecurse=!!t;let P;s==="sync"?P=w:s==="post"?P=()=>ie(w,l&&l.suspense):(w.pre=!0,l&&(w.id=l.uid),P=()=>kl(w));const x=new Al(c,P);t?n?w():I=x.run():s==="post"?ie(x.run.bind(x),l&&l.suspense):x.run();const B=()=>{x.stop(),l&&l.scope&&El(l.scope.effects,x)};return y&&y.push(B),B}function s_(e,t,n){const r=this.proxy,s=St(e)?e.includes(".")?Df(r,e):()=>r[e]:e.bind(r,r);let i;X(t)?i=t:(i=t.handler,n=t);const o=Mt;Er(this);const a=Vf(s,i.bind(r),n);return o?Er(o):Fn(),a}function Df(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function xn(e,t){if(!Et(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Wt(e))xn(e.value,t);else if(K(e))for(let n=0;n<e.length;n++)xn(e[n],t);else if(Yh(e)||hr(e))e.forEach(n=>{xn(n,t)});else if(tf(e))for(const n in e)xn(e[n],t);return e}function GC(e,t){const n=Gt;if(n===null)return e;const r=po(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,l,c=mt]=t[i];o&&(X(o)&&(o={mounted:o,updated:o}),o.deep&&xn(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Pn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Dr(),Re(l,n,8,[e.el,a,e,t]),xr())}}/*! #__NO_SIDE_EFFECTS__ */function xf(e,t){return X(e)?(()=>Bt({name:e.name},t,{setup:e}))():e}const ns=e=>!!e.type.__asyncLoader,Nf=e=>e.type.__isKeepAlive;function i_(e,t){Of(e,"a",t)}function o_(e,t){Of(e,"da",t)}function Of(e,t,n=Mt){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(uo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)Nf(s.parent.vnode)&&a_(r,t,n,s),s=s.parent}}function a_(e,t,n,r){const s=uo(t,e,r,!0);Lf(()=>{El(r[t],s)},n)}function uo(e,t,n=Mt,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Dr(),Er(n);const a=Re(t,n,e,o);return Fn(),xr(),a});return r?s.unshift(i):s.push(i),i}}const tn=e=>(t,n=Mt)=>(!_s||e==="sp")&&uo(e,(...r)=>t(...r),n),l_=tn("bm"),Mf=tn("m"),c_=tn("bu"),u_=tn("u"),h_=tn("bum"),Lf=tn("um"),f_=tn("sp"),d_=tn("rtg"),p_=tn("rtc");function m_(e,t=Mt){uo("ec",e,t)}function g_(e,t,n,r){let s;const i=n&&n[r];if(K(e)||St(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function QC(e,t,n={},r,s){if(Gt.isCE||Gt.parent&&ns(Gt.parent)&&Gt.parent.isCE)return t!=="default"&&(n.name=t),at("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),Ht();const o=i&&Ff(i(n)),a=Ni(oe,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Ff(e){return e.some(t=>Oi(t)?!(t.type===vn||t.type===oe&&!Ff(t.children)):!0)?e:null}const ba=e=>e?Xf(e)?po(e)||e.proxy:ba(e.parent):null,rs=Bt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ba(e.parent),$root:e=>ba(e.root),$emit:e=>e.emit,$options:e=>Dl(e),$forceUpdate:e=>e.f||(e.f=()=>kl(e.update)),$nextTick:e=>e.n||(e.n=If.bind(e.proxy)),$watch:e=>s_.bind(e)}),Go=(e,t)=>e!==mt&&!e.__isScriptSetup&&et(e,t),__={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Go(r,t))return o[t]=1,r[t];if(s!==mt&&et(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&et(c,t))return o[t]=3,i[t];if(n!==mt&&et(n,t))return o[t]=4,n[t];Pa&&(o[t]=0)}}const u=rs[t];let h,f;if(u)return t==="$attrs"&&le(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==mt&&et(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,et(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Go(s,t)?(s[t]=n,!0):r!==mt&&et(r,t)?(r[t]=n,!0):et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==mt&&et(e,o)||Go(t,o)||(a=i[0])&&et(a,o)||et(r,o)||et(rs,o)||et(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:et(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ru(e){return K(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Pa=!0;function y_(e){const t=Dl(e),n=e.proxy,r=e.ctx;Pa=!1,t.beforeCreate&&su(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:y,activated:I,deactivated:w,beforeDestroy:P,beforeUnmount:x,destroyed:B,unmounted:D,render:ht,renderTracked:pt,renderTriggered:Jt,errorCaptured:re,serverPrefetch:nn,expose:ce,inheritAttrs:rn,components:bn,directives:ke,filters:$r}=t;if(c&&E_(c,r,null),o)for(const ft in o){const it=o[ft];X(it)&&(r[ft]=it.bind(n))}if(s){const ft=s.call(n,n);Et(ft)&&(e.data=oo(ft))}if(Pa=!0,i)for(const ft in i){const it=i[ft],ze=X(it)?it.bind(n,n):X(it.get)?it.get.bind(n,n):Ae,sn=!X(it)&&X(it.set)?it.set.bind(n):Ae,Ve=he({get:ze,set:sn});Object.defineProperty(r,ft,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:se=>Ve.value=se})}if(a)for(const ft in a)Uf(a[ft],r,n,ft);if(l){const ft=X(l)?l.call(n):l;Reflect.ownKeys(ft).forEach(it=>{wi(it,ft[it])})}u&&su(u,e,"c");function kt(ft,it){K(it)?it.forEach(ze=>ft(ze.bind(n))):it&&ft(it.bind(n))}if(kt(l_,h),kt(Mf,f),kt(c_,m),kt(u_,y),kt(i_,I),kt(o_,w),kt(m_,re),kt(p_,pt),kt(d_,Jt),kt(h_,x),kt(Lf,D),kt(f_,nn),K(ce))if(ce.length){const ft=e.exposed||(e.exposed={});ce.forEach(it=>{Object.defineProperty(ft,it,{get:()=>n[it],set:ze=>n[it]=ze})})}else e.exposed||(e.exposed={});ht&&e.render===Ae&&(e.render=ht),rn!=null&&(e.inheritAttrs=rn),bn&&(e.components=bn),ke&&(e.directives=ke)}function E_(e,t,n=Ae){K(e)&&(e=Sa(e));for(const r in e){const s=e[r];let i;Et(s)?"default"in s?i=Be(s.from||r,s.default,!0):i=Be(s.from||r):i=Be(s),Wt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function su(e,t,n){Re(K(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Uf(e,t,n,r){const s=r.includes(".")?Df(n,r):()=>n[r];if(St(e)){const i=t[e];X(i)&&Ti(s,i)}else if(X(e))Ti(s,e.bind(n));else if(Et(e))if(K(e))e.forEach(i=>Uf(i,t,n,r));else{const i=X(e.handler)?e.handler.bind(n):t[e.handler];X(i)&&Ti(s,i,e)}}function Dl(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>Di(l,c,o,!0)),Di(l,t,o)),Et(t)&&i.set(t,l),l}function Di(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Di(e,i,n,!0),s&&s.forEach(o=>Di(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=v_[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const v_={data:iu,props:ou,emits:ou,methods:Yr,computed:Yr,beforeCreate:te,created:te,beforeMount:te,mounted:te,beforeUpdate:te,updated:te,beforeDestroy:te,beforeUnmount:te,destroyed:te,unmounted:te,activated:te,deactivated:te,errorCaptured:te,serverPrefetch:te,components:Yr,directives:Yr,watch:w_,provide:iu,inject:T_};function iu(e,t){return t?e?function(){return Bt(X(e)?e.call(this,this):e,X(t)?t.call(this,this):t)}:t:e}function T_(e,t){return Yr(Sa(e),Sa(t))}function Sa(e){if(K(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function te(e,t){return e?[...new Set([].concat(e,t))]:t}function Yr(e,t){return e?Bt(Object.create(null),e,t):t}function ou(e,t){return e?K(e)&&K(t)?[...new Set([...e,...t])]:Bt(Object.create(null),ru(e),ru(t??{})):t}function w_(e,t){if(!e)return t;if(!t)return e;const n=Bt(Object.create(null),e);for(const r in t)n[r]=te(e[r],t[r]);return n}function Bf(){return{app:null,config:{isNativeTag:sg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let I_=0;function A_(e,t){return function(r,s=null){X(r)||(r=Bt({},r)),s!=null&&!Et(s)&&(s=null);const i=Bf(),o=new WeakSet;let a=!1;const l=i.app={_uid:I_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:X_,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&X(c.install)?(o.add(c),c.install(l,...u)):X(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const f=at(r,s);return f.appContext=i,u&&t?t(f,c):e(f,c,h),a=!0,l._container=c,c.__vue_app__=l,po(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){xi=l;try{return c()}finally{xi=null}}};return l}}let xi=null;function wi(e,t){if(Mt){let n=Mt.provides;const r=Mt.parent&&Mt.parent.provides;r===n&&(n=Mt.provides=Object.create(r)),n[e]=t}}function Be(e,t,n=!1){const r=Mt||Gt;if(r||xi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:xi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&X(t)?t.call(r&&r.proxy):t}}function R_(e,t,n,r=!1){const s={},i={};Si(i,fo,1),e.propsDefaults=Object.create(null),$f(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:pf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function C_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=st(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(lo(e.emitsOptions,f))continue;const m=t[f];if(l)if(et(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const y=qe(f);s[y]=ka(l,a,y,m,e,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{$f(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!et(t,h)&&((u=Vr(h))===h||!et(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=ka(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!et(t,h))&&(delete i[h],c=!0)}c&&Qe(e,"set","$attrs")}function $f(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(yi(l))continue;const c=t[l];let u;s&&et(s,u=qe(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:lo(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=st(n),c=a||mt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=ka(s,l,h,c[h],e,!et(c,h))}}return o}function ka(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=et(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&X(l)){const{propsDefaults:c}=s;n in c?r=c[n]:(Er(s),r=c[n]=l.call(null,t),Fn())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Vr(n))&&(r=!0))}return r}function jf(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!X(e)){const u=h=>{l=!0;const[f,m]=jf(h,t,!0);Bt(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return Et(e)&&r.set(e,ur),ur;if(K(i))for(let u=0;u<i.length;u++){const h=qe(i[u]);au(h)&&(o[h]=mt)}else if(i)for(const u in i){const h=qe(u);if(au(h)){const f=i[u],m=o[h]=K(f)||X(f)?{type:f}:Bt({},f);if(m){const y=uu(Boolean,m.type),I=uu(String,m.type);m[0]=y>-1,m[1]=I<0||y<I,(y>-1||et(m,"default"))&&a.push(h)}}}const c=[o,a];return Et(e)&&r.set(e,c),c}function au(e){return e[0]!=="$"}function lu(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function cu(e,t){return lu(e)===lu(t)}function uu(e,t){return K(t)?t.findIndex(n=>cu(n,e)):X(t)&&cu(t,e)?0:-1}const qf=e=>e[0]==="_"||e==="$stable",xl=e=>K(e)?e.map(Ne):[Ne(e)],b_=(e,t,n)=>{if(t._n)return t;const r=Te((...s)=>xl(t(...s)),n);return r._c=!1,r},Hf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(qf(s))continue;const i=e[s];if(X(i))t[s]=b_(s,i,r);else if(i!=null){const o=xl(i);t[s]=()=>o}}},zf=(e,t)=>{const n=xl(t);e.slots.default=()=>n},P_=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=st(t),Si(t,"_",n)):Hf(t,e.slots={})}else e.slots={},t&&zf(e,t);Si(e.slots,fo,1)},S_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=mt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Bt(s,t),!n&&a===1&&delete s._):(i=!t.$stable,Hf(t,s)),o=t}else t&&(zf(e,t),o={default:1});if(i)for(const a in s)!qf(a)&&o[a]==null&&delete s[a]};function Va(e,t,n,r,s=!1){if(K(e)){e.forEach((f,m)=>Va(f,t&&(K(t)?t[m]:t),n,r,s));return}if(ns(r)&&!s)return;const i=r.shapeFlag&4?po(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===mt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(St(c)?(u[c]=null,et(h,c)&&(h[c]=null)):Wt(c)&&(c.value=null)),X(l))dn(l,a,12,[o,u]);else{const f=St(l),m=Wt(l);if(f||m){const y=()=>{if(e.f){const I=f?et(h,l)?h[l]:u[l]:l.value;s?K(I)&&El(I,i):K(I)?I.includes(i)||I.push(i):f?(u[l]=[i],et(h,l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else f?(u[l]=o,et(h,l)&&(h[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(y.id=-1,ie(y,n)):y()}}}const ie=r_;function k_(e){return V_(e)}function V_(e,t){const n=Ta();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=Ae,insertStaticContent:y}=e,I=(d,p,g,_=null,T=null,A=null,N=!1,b=null,S=!!p.dynamicChildren)=>{if(d===p)return;d&&!qr(d,p)&&(_=E(d),se(d,T,A,!0),d=null),p.patchFlag===-2&&(S=!1,p.dynamicChildren=null);const{type:C,ref:q,shapeFlag:F}=p;switch(C){case ho:w(d,p,g,_);break;case vn:P(d,p,g,_);break;case Ii:d==null&&x(p,g,_,N);break;case oe:bn(d,p,g,_,T,A,N,b,S);break;default:F&1?ht(d,p,g,_,T,A,N,b,S):F&6?ke(d,p,g,_,T,A,N,b,S):(F&64||F&128)&&C.process(d,p,g,_,T,A,N,b,S,k)}q!=null&&T&&Va(q,d&&d.ref,A,p||d,!p)},w=(d,p,g,_)=>{if(d==null)r(p.el=a(p.children),g,_);else{const T=p.el=d.el;p.children!==d.children&&c(T,p.children)}},P=(d,p,g,_)=>{d==null?r(p.el=l(p.children||""),g,_):p.el=d.el},x=(d,p,g,_)=>{[d.el,d.anchor]=y(d.children,p,g,_,d.el,d.anchor)},B=({el:d,anchor:p},g,_)=>{let T;for(;d&&d!==p;)T=f(d),r(d,g,_),d=T;r(p,g,_)},D=({el:d,anchor:p})=>{let g;for(;d&&d!==p;)g=f(d),s(d),d=g;s(p)},ht=(d,p,g,_,T,A,N,b,S)=>{N=N||p.type==="svg",d==null?pt(p,g,_,T,A,N,b,S):nn(d,p,T,A,N,b,S)},pt=(d,p,g,_,T,A,N,b)=>{let S,C;const{type:q,props:F,shapeFlag:H,transition:Q,dirs:J}=d;if(S=d.el=o(d.type,A,F&&F.is,F),H&8?u(S,d.children):H&16&&re(d.children,S,null,_,T,A&&q!=="foreignObject",N,b),J&&Pn(d,null,_,"created"),Jt(S,d,d.scopeId,N,_),F){for(const ut in F)ut!=="value"&&!yi(ut)&&i(S,ut,null,F[ut],A,d.children,_,T,$t);"value"in F&&i(S,"value",null,F.value),(C=F.onVnodeBeforeMount)&&xe(C,_,d)}J&&Pn(d,null,_,"beforeMount");const dt=D_(T,Q);dt&&Q.beforeEnter(S),r(S,p,g),((C=F&&F.onVnodeMounted)||dt||J)&&ie(()=>{C&&xe(C,_,d),dt&&Q.enter(S),J&&Pn(d,null,_,"mounted")},T)},Jt=(d,p,g,_,T)=>{if(g&&m(d,g),_)for(let A=0;A<_.length;A++)m(d,_[A]);if(T){let A=T.subTree;if(p===A){const N=T.vnode;Jt(d,N,N.scopeId,N.slotScopeIds,T.parent)}}},re=(d,p,g,_,T,A,N,b,S=0)=>{for(let C=S;C<d.length;C++){const q=d[C]=b?ln(d[C]):Ne(d[C]);I(null,q,p,g,_,T,A,N,b)}},nn=(d,p,g,_,T,A,N)=>{const b=p.el=d.el;let{patchFlag:S,dynamicChildren:C,dirs:q}=p;S|=d.patchFlag&16;const F=d.props||mt,H=p.props||mt;let Q;g&&Sn(g,!1),(Q=H.onVnodeBeforeUpdate)&&xe(Q,g,p,d),q&&Pn(p,d,g,"beforeUpdate"),g&&Sn(g,!0);const J=T&&p.type!=="foreignObject";if(C?ce(d.dynamicChildren,C,b,g,_,J,A):N||it(d,p,b,null,g,_,J,A,!1),S>0){if(S&16)rn(b,p,F,H,g,_,T);else if(S&2&&F.class!==H.class&&i(b,"class",null,H.class,T),S&4&&i(b,"style",F.style,H.style,T),S&8){const dt=p.dynamicProps;for(let ut=0;ut<dt.length;ut++){const At=dt[ut],Ee=F[At],er=H[At];(er!==Ee||At==="value")&&i(b,At,Ee,er,T,d.children,g,_,$t)}}S&1&&d.children!==p.children&&u(b,p.children)}else!N&&C==null&&rn(b,p,F,H,g,_,T);((Q=H.onVnodeUpdated)||q)&&ie(()=>{Q&&xe(Q,g,p,d),q&&Pn(p,d,g,"updated")},_)},ce=(d,p,g,_,T,A,N)=>{for(let b=0;b<p.length;b++){const S=d[b],C=p[b],q=S.el&&(S.type===oe||!qr(S,C)||S.shapeFlag&70)?h(S.el):g;I(S,C,q,null,_,T,A,N,!0)}},rn=(d,p,g,_,T,A,N)=>{if(g!==_){if(g!==mt)for(const b in g)!yi(b)&&!(b in _)&&i(d,b,g[b],null,N,p.children,T,A,$t);for(const b in _){if(yi(b))continue;const S=_[b],C=g[b];S!==C&&b!=="value"&&i(d,b,C,S,N,p.children,T,A,$t)}"value"in _&&i(d,"value",g.value,_.value)}},bn=(d,p,g,_,T,A,N,b,S)=>{const C=p.el=d?d.el:a(""),q=p.anchor=d?d.anchor:a("");let{patchFlag:F,dynamicChildren:H,slotScopeIds:Q}=p;Q&&(b=b?b.concat(Q):Q),d==null?(r(C,g,_),r(q,g,_),re(p.children,g,q,T,A,N,b,S)):F>0&&F&64&&H&&d.dynamicChildren?(ce(d.dynamicChildren,H,g,T,A,N,b),(p.key!=null||T&&p===T.subTree)&&Kf(d,p,!0)):it(d,p,g,q,T,A,N,b,S)},ke=(d,p,g,_,T,A,N,b,S)=>{p.slotScopeIds=b,d==null?p.shapeFlag&512?T.ctx.activate(p,g,_,N,S):$r(p,g,_,T,A,N,S):Jn(d,p,S)},$r=(d,p,g,_,T,A,N)=>{const b=d.component=$_(d,_,T);if(Nf(d)&&(b.ctx.renderer=k),j_(b),b.asyncDep){if(T&&T.registerDep(b,kt),!d.el){const S=b.subTree=at(vn);P(null,S,p,g)}return}kt(b,d,p,g,T,A,N)},Jn=(d,p,g)=>{const _=p.component=d.component;if(Jg(d,p,g))if(_.asyncDep&&!_.asyncResolved){ft(_,p,g);return}else _.next=p,Kg(_.update),_.update();else p.el=d.el,_.vnode=p},kt=(d,p,g,_,T,A,N)=>{const b=()=>{if(d.isMounted){let{next:q,bu:F,u:H,parent:Q,vnode:J}=d,dt=q,ut;Sn(d,!1),q?(q.el=J.el,ft(d,q,N)):q=J,F&&Ei(F),(ut=q.props&&q.props.onVnodeBeforeUpdate)&&xe(ut,Q,q,J),Sn(d,!0);const At=Wo(d),Ee=d.subTree;d.subTree=At,I(Ee,At,h(Ee.el),E(Ee),d,T,A),q.el=At.el,dt===null&&Zg(d,At.el),H&&ie(H,T),(ut=q.props&&q.props.onVnodeUpdated)&&ie(()=>xe(ut,Q,q,J),T)}else{let q;const{el:F,props:H}=p,{bm:Q,m:J,parent:dt}=d,ut=ns(p);if(Sn(d,!1),Q&&Ei(Q),!ut&&(q=H&&H.onVnodeBeforeMount)&&xe(q,dt,p),Sn(d,!0),F&&ot){const At=()=>{d.subTree=Wo(d),ot(F,d.subTree,d,T,null)};ut?p.type.__asyncLoader().then(()=>!d.isUnmounted&&At()):At()}else{const At=d.subTree=Wo(d);I(null,At,g,_,d,T,A),p.el=At.el}if(J&&ie(J,T),!ut&&(q=H&&H.onVnodeMounted)){const At=p;ie(()=>xe(q,dt,At),T)}(p.shapeFlag&256||dt&&ns(dt.vnode)&&dt.vnode.shapeFlag&256)&&d.a&&ie(d.a,T),d.isMounted=!0,p=g=_=null}},S=d.effect=new Al(b,()=>kl(C),d.scope),C=d.update=()=>S.run();C.id=d.uid,Sn(d,!0),C()},ft=(d,p,g)=>{p.component=d;const _=d.vnode.props;d.vnode=p,d.next=null,C_(d,p.props,_,g),S_(d,p.children,g),Dr(),tu(),xr()},it=(d,p,g,_,T,A,N,b,S=!1)=>{const C=d&&d.children,q=d?d.shapeFlag:0,F=p.children,{patchFlag:H,shapeFlag:Q}=p;if(H>0){if(H&128){sn(C,F,g,_,T,A,N,b,S);return}else if(H&256){ze(C,F,g,_,T,A,N,b,S);return}}Q&8?(q&16&&$t(C,T,A),F!==C&&u(g,F)):q&16?Q&16?sn(C,F,g,_,T,A,N,b,S):$t(C,T,A,!0):(q&8&&u(g,""),Q&16&&re(F,g,_,T,A,N,b,S))},ze=(d,p,g,_,T,A,N,b,S)=>{d=d||ur,p=p||ur;const C=d.length,q=p.length,F=Math.min(C,q);let H;for(H=0;H<F;H++){const Q=p[H]=S?ln(p[H]):Ne(p[H]);I(d[H],Q,g,null,T,A,N,b,S)}C>q?$t(d,T,A,!0,!1,F):re(p,g,_,T,A,N,b,S,F)},sn=(d,p,g,_,T,A,N,b,S)=>{let C=0;const q=p.length;let F=d.length-1,H=q-1;for(;C<=F&&C<=H;){const Q=d[C],J=p[C]=S?ln(p[C]):Ne(p[C]);if(qr(Q,J))I(Q,J,g,null,T,A,N,b,S);else break;C++}for(;C<=F&&C<=H;){const Q=d[F],J=p[H]=S?ln(p[H]):Ne(p[H]);if(qr(Q,J))I(Q,J,g,null,T,A,N,b,S);else break;F--,H--}if(C>F){if(C<=H){const Q=H+1,J=Q<q?p[Q].el:_;for(;C<=H;)I(null,p[C]=S?ln(p[C]):Ne(p[C]),g,J,T,A,N,b,S),C++}}else if(C>H)for(;C<=F;)se(d[C],T,A,!0),C++;else{const Q=C,J=C,dt=new Map;for(C=J;C<=H;C++){const ue=p[C]=S?ln(p[C]):Ne(p[C]);ue.key!=null&&dt.set(ue.key,C)}let ut,At=0;const Ee=H-J+1;let er=!1,qc=0;const jr=new Array(Ee);for(C=0;C<Ee;C++)jr[C]=0;for(C=Q;C<=F;C++){const ue=d[C];if(At>=Ee){se(ue,T,A,!0);continue}let De;if(ue.key!=null)De=dt.get(ue.key);else for(ut=J;ut<=H;ut++)if(jr[ut-J]===0&&qr(ue,p[ut])){De=ut;break}De===void 0?se(ue,T,A,!0):(jr[De-J]=C+1,De>=qc?qc=De:er=!0,I(ue,p[De],g,null,T,A,N,b,S),At++)}const Hc=er?x_(jr):ur;for(ut=Hc.length-1,C=Ee-1;C>=0;C--){const ue=J+C,De=p[ue],zc=ue+1<q?p[ue+1].el:_;jr[C]===0?I(null,De,g,zc,T,A,N,b,S):er&&(ut<0||C!==Hc[ut]?Ve(De,g,zc,2):ut--)}}},Ve=(d,p,g,_,T=null)=>{const{el:A,type:N,transition:b,children:S,shapeFlag:C}=d;if(C&6){Ve(d.component.subTree,p,g,_);return}if(C&128){d.suspense.move(p,g,_);return}if(C&64){N.move(d,p,g,k);return}if(N===oe){r(A,p,g);for(let F=0;F<S.length;F++)Ve(S[F],p,g,_);r(d.anchor,p,g);return}if(N===Ii){B(d,p,g);return}if(_!==2&&C&1&&b)if(_===0)b.beforeEnter(A),r(A,p,g),ie(()=>b.enter(A),T);else{const{leave:F,delayLeave:H,afterLeave:Q}=b,J=()=>r(A,p,g),dt=()=>{F(A,()=>{J(),Q&&Q()})};H?H(A,J,dt):dt()}else r(A,p,g)},se=(d,p,g,_=!1,T=!1)=>{const{type:A,props:N,ref:b,children:S,dynamicChildren:C,shapeFlag:q,patchFlag:F,dirs:H}=d;if(b!=null&&Va(b,null,g,d,!0),q&256){p.ctx.deactivate(d);return}const Q=q&1&&H,J=!ns(d);let dt;if(J&&(dt=N&&N.onVnodeBeforeUnmount)&&xe(dt,p,d),q&6)ti(d.component,g,_);else{if(q&128){d.suspense.unmount(g,_);return}Q&&Pn(d,null,p,"beforeUnmount"),q&64?d.type.remove(d,p,g,T,k,_):C&&(A!==oe||F>0&&F&64)?$t(C,p,g,!1,!0):(A===oe&&F&384||!T&&q&16)&&$t(S,p,g),_&&Zn(d)}(J&&(dt=N&&N.onVnodeUnmounted)||Q)&&ie(()=>{dt&&xe(dt,p,d),Q&&Pn(d,null,p,"unmounted")},g)},Zn=d=>{const{type:p,el:g,anchor:_,transition:T}=d;if(p===oe){tr(g,_);return}if(p===Ii){D(d);return}const A=()=>{s(g),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(d.shapeFlag&1&&T&&!T.persisted){const{leave:N,delayLeave:b}=T,S=()=>N(g,A);b?b(d.el,A,S):S()}else A()},tr=(d,p)=>{let g;for(;d!==p;)g=f(d),s(d),d=g;s(p)},ti=(d,p,g)=>{const{bum:_,scope:T,update:A,subTree:N,um:b}=d;_&&Ei(_),T.stop(),A&&(A.active=!1,se(N,d,p,g)),b&&ie(b,p),ie(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},$t=(d,p,g,_=!1,T=!1,A=0)=>{for(let N=A;N<d.length;N++)se(d[N],p,g,_,T)},E=d=>d.shapeFlag&6?E(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el),O=(d,p,g)=>{d==null?p._vnode&&se(p._vnode,null,null,!0):I(p._vnode||null,d,p,null,null,null,g),tu(),Rf(),p._vnode=d},k={p:I,um:se,m:Ve,r:Zn,mt:$r,mc:re,pc:it,pbc:ce,n:E,o:e};let $,ot;return t&&([$,ot]=t(k)),{render:O,hydrate:$,createApp:A_(O,$)}}function Sn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function D_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Kf(e,t,n=!1){const r=e.children,s=t.children;if(K(r)&&K(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=ln(s[i]),a.el=o.el),n||Kf(o,a)),a.type===ho&&(a.el=o.el)}}function x_(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}const N_=e=>e.__isTeleport,oe=Symbol.for("v-fgt"),ho=Symbol.for("v-txt"),vn=Symbol.for("v-cmt"),Ii=Symbol.for("v-stc"),ss=[];let Ie=null;function Ht(e=!1){ss.push(Ie=e?null:[])}function O_(){ss.pop(),Ie=ss[ss.length-1]||null}let gs=1;function hu(e){gs+=e}function Wf(e){return e.dynamicChildren=gs>0?Ie||ur:null,O_(),gs>0&&Ie&&Ie.push(e),e}function ye(e,t,n,r,s,i){return Wf(U(e,t,n,r,s,i,!0))}function Ni(e,t,n,r,s){return Wf(at(e,t,n,r,s,!0))}function Oi(e){return e?e.__v_isVNode===!0:!1}function qr(e,t){return e.type===t.type&&e.key===t.key}const fo="__vInternal",Gf=({key:e})=>e??null,Ai=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?St(e)||Wt(e)||X(e)?{i:Gt,r:e,k:t,f:!!n}:e:null);function U(e,t=null,n=null,r=0,s=null,i=e===oe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Gf(t),ref:t&&Ai(t),scopeId:co,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Gt};return a?(Nl(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=St(n)?8:16),gs>0&&!o&&Ie&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ie.push(l),l}const at=M_;function M_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===t_)&&(e=vn),Oi(e)){const a=yr(e,t,!0);return n&&Nl(a,n),gs>0&&!i&&Ie&&(a.shapeFlag&6?Ie[Ie.indexOf(e)]=a:Ie.push(a)),a.patchFlag|=-2,a}if(W_(e)&&(e=e.__vccOpts),t){t=L_(t);let{class:a,style:l}=t;a&&!St(a)&&(t.class=wl(a)),Et(l)&&(gf(l)&&!K(l)&&(l=Bt({},l)),t.style=Tl(l))}const o=St(e)?1:n_(e)?128:N_(e)?64:Et(e)?4:X(e)?2:0;return U(e,t,n,r,s,o,i,!0)}function L_(e){return e?gf(e)||fo in e?Bt({},e):e:null}function yr(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?F_(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Gf(a),ref:t&&t.ref?n&&s?K(s)?s.concat(Ai(t)):[s,Ai(t)]:Ai(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==oe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&yr(e.ssContent),ssFallback:e.ssFallback&&yr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function ee(e=" ",t=0){return at(ho,null,e,t)}function Qf(e,t){const n=at(Ii,null,e);return n.staticCount=t,n}function Hr(e="",t=!1){return t?(Ht(),Ni(vn,null,e)):at(vn,null,e)}function Ne(e){return e==null||typeof e=="boolean"?at(vn):K(e)?at(oe,null,e.slice()):typeof e=="object"?ln(e):at(ho,null,String(e))}function ln(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:yr(e)}function Nl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(K(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Nl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(fo in t)?t._ctx=Gt:s===3&&Gt&&(Gt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else X(t)?(t={default:t,_ctx:Gt},n=32):(t=String(t),r&64?(n=16,t=[ee(t)]):n=8);e.children=t,e.shapeFlag|=n}function F_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=wl([t.class,r.class]));else if(s==="style")t.style=Tl([t.style,r.style]);else if(to(s)){const i=t[s],o=r[s];o&&i!==o&&!(K(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function xe(e,t,n,r=null){Re(e,t,7,[n,r])}const U_=Bf();let B_=0;function $_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||U_,i={uid:B_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new gg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jf(r,s),emitsOptions:bf(r,s),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:r.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Qg.bind(null,i),e.ce&&e.ce(i),i}let Mt=null,Ol,nr,fu="__VUE_INSTANCE_SETTERS__";(nr=Ta()[fu])||(nr=Ta()[fu]=[]),nr.push(e=>Mt=e),Ol=e=>{nr.length>1?nr.forEach(t=>t(e)):nr[0](e)};const Er=e=>{Ol(e),e.scope.on()},Fn=()=>{Mt&&Mt.scope.off(),Ol(null)};function Xf(e){return e.vnode.shapeFlag&4}let _s=!1;function j_(e,t=!1){_s=t;const{props:n,children:r}=e.vnode,s=Xf(e);R_(e,n,s,t),P_(e,r);const i=s?q_(e,t):void 0;return _s=!1,i}function q_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=_f(new Proxy(e.ctx,__));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?z_(e):null;Er(e),Dr();const i=dn(r,e,0,[e.props,s]);if(xr(),Fn(),Jh(i)){if(i.then(Fn,Fn),t)return i.then(o=>{du(e,o,t)}).catch(o=>{ao(o,e,0)});e.asyncDep=i}else du(e,i,t)}else Yf(e,t)}function du(e,t,n){X(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=Tf(t)),Yf(e,n)}let pu;function Yf(e,t,n){const r=e.type;if(!e.render){if(!t&&pu&&!r.render){const s=r.template||Dl(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Bt(Bt({isCustomElement:i,delimiters:a},o),l);r.render=pu(s,c)}}e.render=r.render||Ae}{Er(e),Dr();try{y_(e)}finally{xr(),Fn()}}}function H_(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return le(e,"get","$attrs"),t[n]}}))}function z_(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return H_(e)},slots:e.slots,emit:e.emit,expose:t}}function po(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Tf(_f(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in rs)return rs[n](e)},has(t,n){return n in t||n in rs}}))}function K_(e,t=!0){return X(e)?e.displayName||e.name:e.name||t&&e.__name}function W_(e){return X(e)&&"__vccOpts"in e}const he=(e,t)=>qg(e,t,_s);function Jf(e,t,n){const r=arguments.length;return r===2?Et(t)&&!K(t)?Oi(t)?at(e,null,[t]):at(e,t):at(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Oi(n)&&(n=[n]),at(e,t,n))}const G_=Symbol.for("v-scx"),Q_=()=>Be(G_),X_="3.3.8",Y_="http://www.w3.org/2000/svg",Dn=typeof document<"u"?document:null,mu=Dn&&Dn.createElement("template"),J_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t?Dn.createElementNS(Y_,e):Dn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Dn.createTextNode(e),createComment:e=>Dn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Dn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{mu.innerHTML=r?`<svg>${e}</svg>`:e;const a=mu.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Z_=Symbol("_vtc");function ty(e,t,n){const r=e[Z_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ey=Symbol("_vod");function ny(e,t,n){const r=e.style,s=St(n);if(n&&!s){if(t&&!St(t))for(const i in t)n[i]==null&&Da(r,i,"");for(const i in n)Da(r,i,n[i])}else{const i=r.display;s?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),ey in e&&(r.display=i)}}const gu=/\s*!important$/;function Da(e,t,n){if(K(n))n.forEach(r=>Da(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=ry(e,t);gu.test(n)?e.setProperty(Vr(r),n.replace(gu,""),"important"):e[r]=n}}const _u=["Webkit","Moz","ms"],Qo={};function ry(e,t){const n=Qo[t];if(n)return n;let r=qe(t);if(r!=="filter"&&r in e)return Qo[t]=r;r=so(r);for(let s=0;s<_u.length;s++){const i=_u[s]+r;if(i in e)return Qo[t]=i}return t}const yu="http://www.w3.org/1999/xlink";function sy(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(yu,t.slice(6,t.length)):e.setAttributeNS(yu,t,n);else{const i=mg(t);n==null||i&&!ef(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function iy(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=ef(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function sr(e,t,n,r){e.addEventListener(t,n,r)}function oy(e,t,n,r){e.removeEventListener(t,n,r)}const Eu=Symbol("_vei");function ay(e,t,n,r,s=null){const i=e[Eu]||(e[Eu]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=ly(t);if(r){const c=i[t]=hy(r,s);sr(e,a,c,l)}else o&&(oy(e,a,o,l),i[t]=void 0)}}const vu=/(?:Once|Passive|Capture)$/;function ly(e){let t;if(vu.test(e)){t={};let r;for(;r=e.match(vu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vr(e.slice(2)),t]}let Xo=0;const cy=Promise.resolve(),uy=()=>Xo||(cy.then(()=>Xo=0),Xo=Date.now());function hy(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Re(fy(r,n.value),t,5,[r])};return n.value=e,n.attached=uy(),n}function fy(e,t){if(K(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Tu=/^on[a-z]/,dy=(e,t,n,r,s=!1,i,o,a,l)=>{t==="class"?ty(e,r,s):t==="style"?ny(e,n,r):to(t)?yl(t)||ay(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):py(e,t,r,s))?iy(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),sy(e,t,r,s))};function py(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Tu.test(t)&&X(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Tu.test(t)&&St(n)?!1:t in e}const wu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return K(t)?n=>Ei(t,n):t};function my(e){e.target.composing=!0}function Iu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Yo=Symbol("_assign"),XC={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Yo]=wu(s);const i=r||s.props&&s.props.type==="number";sr(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=va(a)),e[Yo](a)}),n&&sr(e,"change",()=>{e.value=e.value.trim()}),t||(sr(e,"compositionstart",my),sr(e,"compositionend",Iu),sr(e,"change",Iu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Yo]=wu(i),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(s||e.type==="number")&&va(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},gy=["ctrl","shift","alt","meta"],_y={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>gy.some(n=>e[`${n}Key`]&&!t.includes(n))},YC=(e,t)=>(n,...r)=>{for(let s=0;s<t.length;s++){const i=_y[t[s]];if(i&&i(n,t))return}return e(n,...r)},yy=Bt({patchProp:dy},J_);let Au;function Ey(){return Au||(Au=k_(yy))}const vy=(...e)=>{const t=Ey().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Ty(r);if(!s)return;const i=t._component;!X(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Ty(e){return St(e)?document.querySelector(e):e}const Zf="/MortensChokolade/assets/MortensLogo-747be19e.png",wy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA/CAYAAABEiFArAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAOLSURBVGhD7Zr9cRoxEMV9NBCoIKSCmApCKjCuwE4FJhXEriB2BcYVhFRgUkFIBYEKOPgfyHuMznNcOEmrWxTiETMeZsxqtb99+paysyN9FotFt9VqXWy324Gpom++Z/jmX47fx+v1+nun08mPEUam7XS1Wl1tNptb+O0KfI+RhDtATgVlnKZqcFCqn2XZV9R47qy1xgDlR0jMZy0lVeAAdo3AHkOhKuVmUPFSQ8XGcMvl8hHBXCuBFW5y+PwEwHETv43goNjQNMUmMdSVJeDHJgoGwwFsALBvx6Aq+WQT7YX2wSA4gLUB9htBtH3hEOQStlOU++BbhnYo9wS4oGYfCneLIL+4gkRgc9hwWhiXs885EP9jwGzWbzz8vEP5mcuu+rsYzlc1gD0goKEtIPrC7xMAvrfZwRcn+mIx4M0YAucc9s2ETMW8PoBkc3UBgk+2kgmBGyOQi7qoAfYDQfS9qIyRUXBma6JmahhJ/Irh8jxfoILagcQM3xNJELQFoLUfhwwsIXBbi2pzqMbBQvwB3DmU+6nZIkRwZv34bAkgqOMX/tAqahMHm2m73e5JsqYNx5W990BSDdQ1sABOFK/I2EO5pnCcFmon+QRXag6vWzlsWZzLqFIyuo7tDZuVeBoo/BvftaMtfHv3Z2x655ljhJIMTidly8VEgjspSTyDScrZViNcNXCdiY5+45lQLzOzDxwZY+5C3noVLBkFK4eCPH67L3y51oWSwOD7F+z7lc2tdXI/5D8Ijlk9tDgG4AgZvpKA1ATFY729U6+Q5IXCHdyvubYsvtB1WybplBUEhyB55MYzjb3zfVTO3ULfF8LSl3leWfS3nVnISVso3Fn12BurnBs4e+mDDQGZPDbNiQHjPo9HiF2J32C4UiUMgHcD3kd8ggCLS5GguwcNOEGscU0TXNx869WWlNPLZVxPSbm4+darLSmnl8u4npJycfOtV1tSTi+XcT0l5eLmW6+2pJxeLuN6SsrFzbdebUk5vVzG9ZSUi5tvvdqg3EOG01zxJYNeCMfzBLg7wt1rX0EdL2R/z4DrEc76LMnf3elYFjdRu6car61pAm53mVLA8Tyefc/5avV09DkcCaeA4knkyyMbPn2COd9S/reA1VvZvRdE7H8GUHwH/a8VpWKIYVC+N/zreZR5tcq3yUEX7bEhjVrD4j6vXL/17ZdRkmp2YwftUR/v76a2V+t/ADV3sl87vD/+AAAAAElFTkSuQmCC";/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ir=typeof window<"u";function Iy(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const lt=Object.assign;function Jo(e,t){const n={};for(const r in t){const s=t[r];n[r]=be(s)?s.map(e):e(s)}return n}const is=()=>{},be=Array.isArray,Ay=/\/$/,Ry=e=>e.replace(Ay,"");function Zo(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=Sy(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function Cy(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ru(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function by(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&vr(t.matched[r],n.matched[s])&&td(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function vr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function td(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Py(e[n],t[n]))return!1;return!0}function Py(e,t){return be(e)?Cu(e,t):be(t)?Cu(t,e):e===t}function Cu(e,t){return be(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Sy(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var ys;(function(e){e.pop="pop",e.push="push"})(ys||(ys={}));var os;(function(e){e.back="back",e.forward="forward",e.unknown=""})(os||(os={}));function ky(e){if(!e)if(ir){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Ry(e)}const Vy=/^[^#]+#/;function Dy(e,t){return e.replace(Vy,"#")+t}function xy(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const mo=()=>({left:window.pageXOffset,top:window.pageYOffset});function Ny(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=xy(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function bu(e,t){return(history.state?history.state.position-t:-1)+e}const xa=new Map;function Oy(e,t){xa.set(e,t)}function My(e){const t=xa.get(e);return xa.delete(e),t}let Ly=()=>location.protocol+"//"+location.host;function ed(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Ru(l,"")}return Ru(n,e)+r+s}function Fy(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=ed(e,location),y=n.value,I=t.value;let w=0;if(f){if(n.value=m,t.value=f,o&&o===y){o=null;return}w=I?f.position-I.position:0}else r(m);s.forEach(P=>{P(n.value,y,{delta:w,type:ys.pop,direction:w?w>0?os.forward:os.back:os.unknown})})};function l(){o=n.value}function c(f){s.push(f);const m=()=>{const y=s.indexOf(f);y>-1&&s.splice(y,1)};return i.push(m),m}function u(){const{history:f}=window;f.state&&f.replaceState(lt({},f.state,{scroll:mo()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Pu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?mo():null}}function Uy(e){const{history:t,location:n}=window,r={value:ed(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:Ly()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](f)}}function o(l,c){const u=lt({},t.state,Pu(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=lt({},s.value,t.state,{forward:l,scroll:mo()});i(u.current,u,!0);const h=lt({},Pu(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function By(e){e=ky(e);const t=Uy(e),n=Fy(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=lt({location:"",base:e,go:r,createHref:Dy.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function $y(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),By(e)}function jy(e){return typeof e=="string"||e&&typeof e=="object"}function nd(e){return typeof e=="string"||typeof e=="symbol"}const an={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},rd=Symbol("");var Su;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Su||(Su={}));function Tr(e,t){return lt(new Error,{type:e,[rd]:!0},t)}function Ke(e,t){return e instanceof Error&&rd in e&&(t==null||!!(e.type&t))}const ku="[^/]+?",qy={sensitive:!1,strict:!1,start:!0,end:!0},Hy=/[.+*?^${}()[\]/\\]/g;function zy(e,t){const n=lt({},qy,t),r=[];let s=n.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(Hy,"\\$&"),m+=40;else if(f.type===1){const{value:y,repeatable:I,optional:w,regexp:P}=f;i.push({name:y,repeatable:I,optional:w});const x=P||ku;if(x!==ku){m+=10;try{new RegExp(`(${x})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${y}" (${x}): `+D.message)}}let B=I?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(B=w&&c.length<2?`(?:/${B})`:"/"+B),w&&(B+="?"),s+=B,m+=20,w&&(m+=-8),I&&(m+=-20),x===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",y=i[f-1];h[y.name]=m&&y.repeatable?m.split("/"):m}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:y,repeatable:I,optional:w}=m,P=y in c?c[y]:"";if(be(P)&&!I)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const x=be(P)?P.join("/"):P;if(!x)if(w)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);u+=x}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Ky(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Wy(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Ky(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Vu(r))return 1;if(Vu(s))return-1}return s.length-r.length}function Vu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Gy={type:0,value:""},Qy=/[a-zA-Z0-9_]/;function Xy(e){if(!e)return[[]];if(e==="/")return[[Gy]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:Qy.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function Yy(e,t,n){const r=zy(Xy(e.path),n),s=lt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Jy(e,t){const n=[],r=new Map;t=Nu({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const m=!f,y=Zy(u);y.aliasOf=f&&f.record;const I=Nu(t,u),w=[y];if("alias"in u){const B=typeof u.alias=="string"?[u.alias]:u.alias;for(const D of B)w.push(lt({},y,{components:f?f.record.components:y.components,path:D,aliasOf:f?f.record:y}))}let P,x;for(const B of w){const{path:D}=B;if(h&&D[0]!=="/"){const ht=h.record.path,pt=ht[ht.length-1]==="/"?"":"/";B.path=h.record.path+(D&&pt+D)}if(P=Yy(B,h,I),f?f.alias.push(P):(x=x||P,x!==P&&x.alias.push(P),m&&u.name&&!xu(P)&&o(u.name)),y.children){const ht=y.children;for(let pt=0;pt<ht.length;pt++)i(ht[pt],P,f&&f.children[pt])}f=f||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&l(P)}return x?()=>{o(x)}:is}function o(u){if(nd(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&Wy(u,n[h])>=0&&(u.record.path!==n[h].record.path||!sd(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!xu(u)&&r.set(u.record.name,u)}function c(u,h){let f,m={},y,I;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Tr(1,{location:u});I=f.record.name,m=lt(Du(h.params,f.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&Du(u.params,f.keys.map(x=>x.name))),y=f.stringify(m)}else if("path"in u)y=u.path,f=n.find(x=>x.re.test(y)),f&&(m=f.parse(y),I=f.record.name);else{if(f=h.name?r.get(h.name):n.find(x=>x.re.test(h.path)),!f)throw Tr(1,{location:u,currentLocation:h});I=f.record.name,m=lt({},h.params,u.params),y=f.stringify(m)}const w=[];let P=f;for(;P;)w.unshift(P.record),P=P.parent;return{name:I,path:y,params:m,matched:w,meta:eE(w)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Du(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Zy(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:tE(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function tE(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function xu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function eE(e){return e.reduce((t,n)=>lt(t,n.meta),{})}function Nu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function sd(e,t){return t.children.some(n=>n===e||sd(e,n))}const id=/#/g,nE=/&/g,rE=/\//g,sE=/=/g,iE=/\?/g,od=/\+/g,oE=/%5B/g,aE=/%5D/g,ad=/%5E/g,lE=/%60/g,ld=/%7B/g,cE=/%7C/g,cd=/%7D/g,uE=/%20/g;function Ml(e){return encodeURI(""+e).replace(cE,"|").replace(oE,"[").replace(aE,"]")}function hE(e){return Ml(e).replace(ld,"{").replace(cd,"}").replace(ad,"^")}function Na(e){return Ml(e).replace(od,"%2B").replace(uE,"+").replace(id,"%23").replace(nE,"%26").replace(lE,"`").replace(ld,"{").replace(cd,"}").replace(ad,"^")}function fE(e){return Na(e).replace(sE,"%3D")}function dE(e){return Ml(e).replace(id,"%23").replace(iE,"%3F")}function pE(e){return e==null?"":dE(e).replace(rE,"%2F")}function Mi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function mE(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(od," "),o=i.indexOf("="),a=Mi(o<0?i:i.slice(0,o)),l=o<0?null:Mi(i.slice(o+1));if(a in t){let c=t[a];be(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Ou(e){let t="";for(let n in e){const r=e[n];if(n=fE(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(be(r)?r.map(i=>i&&Na(i)):[r&&Na(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function gE(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=be(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const _E=Symbol(""),Mu=Symbol(""),go=Symbol(""),ud=Symbol(""),Oa=Symbol("");function zr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function cn(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Tr(4,{from:n,to:t})):h instanceof Error?a(h):jy(h)?a(Tr(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},c=e.call(r&&r.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function ta(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(yE(a)){const c=(a.__vccOpts||a)[t];c&&s.push(cn(c,n,r,i,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=Iy(c)?c.default:c;i.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&cn(f,n,r,i,o)()}))}}return s}function yE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Lu(e){const t=Be(go),n=Be(ud),r=he(()=>t.resolve(Xe(e.to))),s=he(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(vr.bind(null,u));if(f>-1)return f;const m=Fu(l[c-2]);return c>1&&Fu(u)===m&&h[h.length-1].path!==m?h.findIndex(vr.bind(null,l[c-2])):f}),i=he(()=>s.value>-1&&wE(n.params,r.value.params)),o=he(()=>s.value>-1&&s.value===n.matched.length-1&&td(n.params,r.value.params));function a(l={}){return TE(l)?t[Xe(e.replace)?"replace":"push"](Xe(e.to)).catch(is):Promise.resolve()}return{route:r,href:he(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const EE=xf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Lu,setup(e,{slots:t}){const n=oo(Lu(e)),{options:r}=Be(go),s=he(()=>({[Uu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Uu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:Jf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),vE=EE;function TE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function wE(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!be(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Fu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Uu=(e,t,n)=>e??t??n,IE=xf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Be(Oa),s=he(()=>e.route||r.value),i=Be(Mu,0),o=he(()=>{let c=Xe(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=he(()=>s.value.matched[o.value]);wi(Mu,he(()=>o.value+1)),wi(_E,a),wi(Oa,s);const l=Nr();return Ti(()=>[l.value,a.value,e.name],([c,u,h],[f,m,y])=>{u&&(u.instances[h]=c,m&&m!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!vr(u,m)||!f)&&(u.enterCallbacks[h]||[]).forEach(I=>I(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Bu(n.default,{Component:f,route:c});const m=h.props[u],y=m?m===!0?c.params:typeof m=="function"?m(c):m:null,w=Jf(f,lt({},y,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Bu(n.default,{Component:w,route:c})||w}}});function Bu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const AE=IE;function RE(e){const t=Jy(e.routes,e),n=e.parseQuery||mE,r=e.stringifyQuery||Ou,s=e.history,i=zr(),o=zr(),a=zr(),l=Ug(an);let c=an;ir&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Jo.bind(null,E=>""+E),h=Jo.bind(null,pE),f=Jo.bind(null,Mi);function m(E,O){let k,$;return nd(E)?(k=t.getRecordMatcher(E),$=O):$=E,t.addRoute($,k)}function y(E){const O=t.getRecordMatcher(E);O&&t.removeRoute(O)}function I(){return t.getRoutes().map(E=>E.record)}function w(E){return!!t.getRecordMatcher(E)}function P(E,O){if(O=lt({},O||l.value),typeof E=="string"){const g=Zo(n,E,O.path),_=t.resolve({path:g.path},O),T=s.createHref(g.fullPath);return lt(g,_,{params:f(_.params),hash:Mi(g.hash),redirectedFrom:void 0,href:T})}let k;if("path"in E)k=lt({},E,{path:Zo(n,E.path,O.path).path});else{const g=lt({},E.params);for(const _ in g)g[_]==null&&delete g[_];k=lt({},E,{params:h(g)}),O.params=h(O.params)}const $=t.resolve(k,O),ot=E.hash||"";$.params=u(f($.params));const d=Cy(r,lt({},E,{hash:hE(ot),path:$.path})),p=s.createHref(d);return lt({fullPath:d,hash:ot,query:r===Ou?gE(E.query):E.query||{}},$,{redirectedFrom:void 0,href:p})}function x(E){return typeof E=="string"?Zo(n,E,l.value.path):lt({},E)}function B(E,O){if(c!==E)return Tr(8,{from:O,to:E})}function D(E){return Jt(E)}function ht(E){return D(lt(x(E),{replace:!0}))}function pt(E){const O=E.matched[E.matched.length-1];if(O&&O.redirect){const{redirect:k}=O;let $=typeof k=="function"?k(E):k;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=x($):{path:$},$.params={}),lt({query:E.query,hash:E.hash,params:"path"in $?{}:E.params},$)}}function Jt(E,O){const k=c=P(E),$=l.value,ot=E.state,d=E.force,p=E.replace===!0,g=pt(k);if(g)return Jt(lt(x(g),{state:typeof g=="object"?lt({},ot,g.state):ot,force:d,replace:p}),O||k);const _=k;_.redirectedFrom=O;let T;return!d&&by(r,$,k)&&(T=Tr(16,{to:_,from:$}),Ve($,$,!0,!1)),(T?Promise.resolve(T):ce(_,$)).catch(A=>Ke(A)?Ke(A,2)?A:sn(A):it(A,_,$)).then(A=>{if(A){if(Ke(A,2))return Jt(lt({replace:p},x(A.to),{state:typeof A.to=="object"?lt({},ot,A.to.state):ot,force:d}),O||_)}else A=bn(_,$,!0,p,ot);return rn(_,$,A),A})}function re(E,O){const k=B(E,O);return k?Promise.reject(k):Promise.resolve()}function nn(E){const O=tr.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(E):E()}function ce(E,O){let k;const[$,ot,d]=CE(E,O);k=ta($.reverse(),"beforeRouteLeave",E,O);for(const g of $)g.leaveGuards.forEach(_=>{k.push(cn(_,E,O))});const p=re.bind(null,E,O);return k.push(p),$t(k).then(()=>{k=[];for(const g of i.list())k.push(cn(g,E,O));return k.push(p),$t(k)}).then(()=>{k=ta(ot,"beforeRouteUpdate",E,O);for(const g of ot)g.updateGuards.forEach(_=>{k.push(cn(_,E,O))});return k.push(p),$t(k)}).then(()=>{k=[];for(const g of d)if(g.beforeEnter)if(be(g.beforeEnter))for(const _ of g.beforeEnter)k.push(cn(_,E,O));else k.push(cn(g.beforeEnter,E,O));return k.push(p),$t(k)}).then(()=>(E.matched.forEach(g=>g.enterCallbacks={}),k=ta(d,"beforeRouteEnter",E,O),k.push(p),$t(k))).then(()=>{k=[];for(const g of o.list())k.push(cn(g,E,O));return k.push(p),$t(k)}).catch(g=>Ke(g,8)?g:Promise.reject(g))}function rn(E,O,k){a.list().forEach($=>nn(()=>$(E,O,k)))}function bn(E,O,k,$,ot){const d=B(E,O);if(d)return d;const p=O===an,g=ir?history.state:{};k&&($||p?s.replace(E.fullPath,lt({scroll:p&&g&&g.scroll},ot)):s.push(E.fullPath,ot)),l.value=E,Ve(E,O,k,p),sn()}let ke;function $r(){ke||(ke=s.listen((E,O,k)=>{if(!ti.listening)return;const $=P(E),ot=pt($);if(ot){Jt(lt(ot,{replace:!0}),$).catch(is);return}c=$;const d=l.value;ir&&Oy(bu(d.fullPath,k.delta),mo()),ce($,d).catch(p=>Ke(p,12)?p:Ke(p,2)?(Jt(p.to,$).then(g=>{Ke(g,20)&&!k.delta&&k.type===ys.pop&&s.go(-1,!1)}).catch(is),Promise.reject()):(k.delta&&s.go(-k.delta,!1),it(p,$,d))).then(p=>{p=p||bn($,d,!1),p&&(k.delta&&!Ke(p,8)?s.go(-k.delta,!1):k.type===ys.pop&&Ke(p,20)&&s.go(-1,!1)),rn($,d,p)}).catch(is)}))}let Jn=zr(),kt=zr(),ft;function it(E,O,k){sn(E);const $=kt.list();return $.length?$.forEach(ot=>ot(E,O,k)):console.error(E),Promise.reject(E)}function ze(){return ft&&l.value!==an?Promise.resolve():new Promise((E,O)=>{Jn.add([E,O])})}function sn(E){return ft||(ft=!E,$r(),Jn.list().forEach(([O,k])=>E?k(E):O()),Jn.reset()),E}function Ve(E,O,k,$){const{scrollBehavior:ot}=e;if(!ir||!ot)return Promise.resolve();const d=!k&&My(bu(E.fullPath,0))||($||!k)&&history.state&&history.state.scroll||null;return If().then(()=>ot(E,O,d)).then(p=>p&&Ny(p)).catch(p=>it(p,E,O))}const se=E=>s.go(E);let Zn;const tr=new Set,ti={currentRoute:l,listening:!0,addRoute:m,removeRoute:y,hasRoute:w,getRoutes:I,resolve:P,options:e,push:D,replace:ht,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:kt.add,isReady:ze,install(E){const O=this;E.component("RouterLink",vE),E.component("RouterView",AE),E.config.globalProperties.$router=O,Object.defineProperty(E.config.globalProperties,"$route",{enumerable:!0,get:()=>Xe(l)}),ir&&!Zn&&l.value===an&&(Zn=!0,D(s.location).catch(ot=>{}));const k={};for(const ot in an)Object.defineProperty(k,ot,{get:()=>l.value[ot],enumerable:!0});E.provide(go,O),E.provide(ud,pf(k)),E.provide(Oa,l);const $=E.unmount;tr.add(E),E.unmount=function(){tr.delete(E),tr.size<1&&(c=an,ke&&ke(),ke=null,l.value=an,Zn=!1,ft=!1),$()}}};function $t(E){return E.reduce((O,k)=>O.then(()=>nn(k)),Promise.resolve())}return ti}function CE(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>vr(c,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>vr(c,l))||s.push(l))}return[n,r,s]}function bE(){return Be(go)}const Os=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},en=e=>(Pf("data-v-6af7d1ec"),e=e(),Sf(),e),PE={id:"header"},SE={class:"headerHelperContainer"},kE={class:"headerItemsContainer"},VE=en(()=>U("i",{class:"fa fa-bars"},null,-1)),DE=[VE],xE={class:"headerLogo"},NE=en(()=>U("img",{src:Zf,alt:"Mortens Chokolade Logo"},null,-1)),OE={class:"navHelperContainer"},ME={class:"headerNav"},LE=en(()=>U("p",{class:"routerlink"},"Kurser & events",-1)),FE=en(()=>U("p",{class:"routerlink"},"Om Mortens Chokolade",-1)),UE=en(()=>U("p",{class:"routerlink"},"Kontakt",-1)),BE={class:"headerCartIcon"},$E=en(()=>U("img",{src:wy,alt:"Shopping Cart"},null,-1)),jE={key:0,class:"burgerMenu"},qE={class:"burgerMenuItems"},HE=en(()=>U("p",null,[U("p",{class:"routerlink"}," Kurser & events")],-1)),zE=en(()=>U("p",null,[U("p",{class:"routerlink"}," Om Mortens Chokolade")],-1)),KE=en(()=>U("p",null,[U("p",{class:"routerlink"}," Kontakt")],-1)),WE={__name:"TheHeader",props:["isAdmin","setIsAdmin","totalCartAmount"],setup(e){const t=e,n=bE(),r=he(()=>n.currentRoute),s=()=>{t.setIsAdmin(!1),r.value.value.path!=="/shop"&&n.push("/")},i=Nr(!1),o=()=>{i.value=!i.value};return(a,l)=>{const c=Vl("router-link");return Ht(),ye("header",PE,[U("div",SE,[U("div",kE,[U("div",{class:"burgerContainerIcon",onClick:o},DE),U("div",xE,[at(c,{to:"/",class:"headerLogoRouter"},{default:Te(()=>[NE]),_:1})]),U("div",OE,[U("nav",ME,[U("p",null,[at(c,{to:"/",class:"routerlink"},{default:Te(()=>[ee("Home")]),_:1})]),U("p",null,[at(c,{to:"/shop",class:"routerlink"},{default:Te(()=>[ee("Shop")]),_:1})]),LE,FE,UE,U("p",null,[t.isAdmin?(Ht(),Ni(c,{key:0,to:"/admin",class:"routerlink"},{default:Te(()=>[ee("admin")]),_:1})):Hr("",!0)]),t.isAdmin?(Ht(),ye("p",{key:0,class:"routerlink",onClick:s},"log ud")):Hr("",!0)])]),U("div",BE,[$E,U("p",null,vi(t.totalCartAmount),1)])]),i.value?(Ht(),ye("div",jE,[U("div",qE,[U("p",null,[at(c,{to:"/",class:"routerlink"},{default:Te(()=>[ee("home")]),_:1})]),U("p",null,[at(c,{to:"/shop",class:"routerlink"},{default:Te(()=>[ee("shop")]),_:1})]),HE,zE,KE,U("p",null,[t.isAdmin?(Ht(),Ni(c,{key:0,to:"/admin",class:"routerlink"},{default:Te(()=>[ee("admin")]),_:1})):Hr("",!0)]),t.isAdmin?(Ht(),ye("p",{key:0,class:"routerlink",onClick:s},"log ud")):Hr("",!0)])])):Hr("",!0)])])}}},GE=Os(WE,[["__scopeId","data-v-6af7d1ec"]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},QE=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},fd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(hd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):QE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new XE;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class XE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YE=function(e){const t=hd(e);return fd.encodeByteArray(t,!0)},Li=function(e){return YE(e).replace(/\./g,"")},JE=function(e){try{return fd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=()=>ZE().__FIREBASE_DEFAULTS__,ev=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},nv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&JE(e[1]);return t&&JSON.parse(t)},Ll=()=>{try{return tv()||ev()||nv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},rv=e=>{var t,n;return(n=(t=Ll())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},dd=e=>{const t=rv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},pd=()=>{var e;return(e=Ll())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[Li(JSON.stringify(n)),Li(JSON.stringify(o)),a].join(".")}function iv(){var e;const t=(e=Ll())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ov(){try{return typeof indexedDB=="object"}catch{return!1}}function av(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="FirebaseError";class Gn extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=lv,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gd.prototype.create)}}class gd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?cv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Gn(s,a,r)}}function cv(e,t){return e.replace(uv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const uv=/\{\$([^}]+)}/g;function Ma(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if($u(i)&&$u(o)){if(!Ma(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $u(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e){return e&&e._delegate?e._delegate:e}class wr{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new sv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dv(t))try{this.getOrInitializeService({instanceIdentifier:kn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=kn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=kn){return this.instances.has(t)}getOptions(t=kn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fv(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=kn){return this.component?this.component.multipleInstances?t:kn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fv(e){return e===kn?void 0:e}function dv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new hv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(nt||(nt={}));const mv={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},gv=nt.INFO,_v={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},yv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=_v[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _d{constructor(t){this.name=t,this._logLevel=gv,this._logHandler=yv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...t),this._logHandler(this,nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...t),this._logHandler(this,nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...t),this._logHandler(this,nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...t),this._logHandler(this,nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...t),this._logHandler(this,nt.ERROR,...t)}}const Ev=(e,t)=>t.some(n=>e instanceof n);let ju,qu;function vv(){return ju||(ju=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tv(){return qu||(qu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yd=new WeakMap,La=new WeakMap,Ed=new WeakMap,ea=new WeakMap,Fl=new WeakMap;function wv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(pn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&yd.set(n,e)}).catch(()=>{}),Fl.set(t,e),t}function Iv(e){if(La.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});La.set(e,t)}let Fa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return La.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Ed.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Av(e){Fa=e(Fa)}function Rv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(na(this),t,...n);return Ed.set(r,t.sort?t.sort():[t]),pn(r)}:Tv().includes(e)?function(...t){return e.apply(na(this),t),pn(yd.get(this))}:function(...t){return pn(e.apply(na(this),t))}}function Cv(e){return typeof e=="function"?Rv(e):(e instanceof IDBTransaction&&Iv(e),Ev(e,vv())?new Proxy(e,Fa):e)}function pn(e){if(e instanceof IDBRequest)return wv(e);if(ea.has(e))return ea.get(e);const t=Cv(e);return t!==e&&(ea.set(e,t),Fl.set(t,e)),t}const na=e=>Fl.get(e);function bv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=pn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(pn(o.result),l.oldVersion,l.newVersion,pn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Pv=["get","getKey","getAll","getAllKeys","count"],Sv=["put","add","delete","clear"],ra=new Map;function Hu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ra.get(t))return ra.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Sv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Pv.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ra.set(t,i),i}Av(e=>({...e,get:(t,n,r)=>Hu(t,n)||e.get(t,n,r),has:(t,n)=>!!Hu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Vv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ua="@firebase/app",zu="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new _d("@firebase/app"),Dv="@firebase/app-compat",xv="@firebase/analytics-compat",Nv="@firebase/analytics",Ov="@firebase/app-check-compat",Mv="@firebase/app-check",Lv="@firebase/auth",Fv="@firebase/auth-compat",Uv="@firebase/database",Bv="@firebase/database-compat",$v="@firebase/functions",jv="@firebase/functions-compat",qv="@firebase/installations",Hv="@firebase/installations-compat",zv="@firebase/messaging",Kv="@firebase/messaging-compat",Wv="@firebase/performance",Gv="@firebase/performance-compat",Qv="@firebase/remote-config",Xv="@firebase/remote-config-compat",Yv="@firebase/storage",Jv="@firebase/storage-compat",Zv="@firebase/firestore",tT="@firebase/firestore-compat",eT="firebase",nT="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="[DEFAULT]",rT={[Ua]:"fire-core",[Dv]:"fire-core-compat",[Nv]:"fire-analytics",[xv]:"fire-analytics-compat",[Mv]:"fire-app-check",[Ov]:"fire-app-check-compat",[Lv]:"fire-auth",[Fv]:"fire-auth-compat",[Uv]:"fire-rtdb",[Bv]:"fire-rtdb-compat",[$v]:"fire-fn",[jv]:"fire-fn-compat",[qv]:"fire-iid",[Hv]:"fire-iid-compat",[zv]:"fire-fcm",[Kv]:"fire-fcm-compat",[Wv]:"fire-perf",[Gv]:"fire-perf-compat",[Qv]:"fire-rc",[Xv]:"fire-rc-compat",[Yv]:"fire-gcs",[Jv]:"fire-gcs-compat",[Zv]:"fire-fst",[tT]:"fire-fst-compat","fire-js":"fire-js",[eT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Map,$a=new Map;function sT(e,t){try{e.container.addComponent(t)}catch(n){jn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Es(e){const t=e.name;if($a.has(t))return jn.debug(`There were multiple attempts to register component ${t}.`),!1;$a.set(t,e);for(const n of Fi.values())sT(n,e);return!0}function vd(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mn=new gd("app","Firebase",iT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=nT;function wd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Ba,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw mn.create("bad-app-name",{appName:String(s)});if(n||(n=pd()),!n)throw mn.create("no-options");const i=Fi.get(s);if(i){if(Ma(n,i.options)&&Ma(r,i.config))return i;throw mn.create("duplicate-app",{appName:s})}const o=new pv(s);for(const l of $a.values())o.addComponent(l);const a=new oT(n,r,o);return Fi.set(s,a),a}function Id(e=Ba){const t=Fi.get(e);if(!t&&e===Ba&&pd())return wd();if(!t)throw mn.create("no-app",{appName:e});return t}function gn(e,t,n){var r;let s=(r=rT[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),jn.warn(a.join(" "));return}Es(new wr(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firebase-heartbeat-database",lT=1,vs="firebase-heartbeat-store";let sa=null;function Ad(){return sa||(sa=bv(aT,lT,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(vs)}}}).catch(e=>{throw mn.create("idb-open",{originalErrorMessage:e.message})})),sa}async function cT(e){try{return await(await Ad()).transaction(vs).objectStore(vs).get(Rd(e))}catch(t){if(t instanceof Gn)jn.warn(t.message);else{const n=mn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});jn.warn(n.message)}}}async function Ku(e,t){try{const r=(await Ad()).transaction(vs,"readwrite");await r.objectStore(vs).put(t,Rd(e)),await r.done}catch(n){if(n instanceof Gn)jn.warn(n.message);else{const r=mn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jn.warn(r.message)}}}function Rd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1024,hT=30*24*60*60*1e3;class fT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wu();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=hT}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wu(),{heartbeatsToSend:r,unsentEntries:s}=dT(this._heartbeatsCache.heartbeats),i=Li(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Wu(){return new Date().toISOString().substring(0,10)}function dT(e,t=uT){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ov()?av().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await cT(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ku(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ku(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Gu(e){return Li(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(e){Es(new wr("platform-logger",t=>new kv(t),"PRIVATE")),Es(new wr("heartbeat",t=>new fT(t),"PRIVATE")),gn(Ua,zu,e),gn(Ua,zu,"esm2017"),gn("fire-js","")}mT("");var gT="firebase",_T="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(gT,_T,"app");var yT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,Ul=Ul||{},W=yT||self;function _o(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Ms(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function ET(e){return Object.prototype.hasOwnProperty.call(e,ia)&&e[ia]||(e[ia]=++vT)}var ia="closure_uid_"+(1e9*Math.random()>>>0),vT=0;function TT(e,t,n){return e.call.apply(e.bind,arguments)}function wT(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Qt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qt=TT:Qt=wT,Qt.apply(null,arguments)}function ai(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function xt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function An(){this.s=this.s,this.o=this.o}var IT=0;An.prototype.s=!1;An.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),IT!=0)&&ET(this)};An.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Bl(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qu(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(_o(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Xt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var AT=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{W.addEventListener("test",()=>{},t),W.removeEventListener("test",()=>{},t)}catch{}return e}();function Ts(e){return/^[\s\xa0]*$/.test(e)}function yo(){var e=W.navigator;return e&&(e=e.userAgent)?e:""}function Me(e){return yo().indexOf(e)!=-1}function $l(e){return $l[" "](e),e}$l[" "]=function(){};function RT(e,t){var n=_w;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var CT=Me("Opera"),Ir=Me("Trident")||Me("MSIE"),bd=Me("Edge"),ja=bd||Ir,Pd=Me("Gecko")&&!(yo().toLowerCase().indexOf("webkit")!=-1&&!Me("Edge"))&&!(Me("Trident")||Me("MSIE"))&&!Me("Edge"),bT=yo().toLowerCase().indexOf("webkit")!=-1&&!Me("Edge");function Sd(){var e=W.document;return e?e.documentMode:void 0}var qa;t:{var oa="",aa=function(){var e=yo();if(Pd)return/rv:([^\);]+)(\)|;)/.exec(e);if(bd)return/Edge\/([\d\.]+)/.exec(e);if(Ir)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(bT)return/WebKit\/(\S+)/.exec(e);if(CT)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(aa&&(oa=aa?aa[1]:""),Ir){var la=Sd();if(la!=null&&la>parseFloat(oa)){qa=String(la);break t}}qa=oa}var Ha;if(W.document&&Ir){var Xu=Sd();Ha=Xu||parseInt(qa,10)||void 0}else Ha=void 0;var PT=Ha;function ws(e,t){if(Xt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Pd){t:{try{$l(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:ST[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ws.$.h.call(this)}}xt(ws,Xt);var ST={2:"touch",3:"pen",4:"mouse"};ws.prototype.h=function(){ws.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ls="closure_listenable_"+(1e6*Math.random()|0),kT=0;function VT(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++kT,this.fa=this.ia=!1}function Eo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function jl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function DT(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function kd(e){const t={};for(const n in e)t[n]=e[n];return t}const Yu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vd(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<Yu.length;i++)n=Yu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function vo(e){this.src=e,this.g={},this.h=0}vo.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Ka(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new VT(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function za(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Cd(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Eo(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Ka(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var ql="closure_lm_"+(1e6*Math.random()|0),ca={};function Dd(e,t,n,r,s){if(r&&r.once)return Nd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Dd(e,t[i],n,r,s);return null}return n=Kl(n),e&&e[Ls]?e.O(t,n,Ms(r)?!!r.capture:!!r,s):xd(e,t,n,!1,r,s)}function xd(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Ms(s)?!!s.capture:!!s,a=zl(e);if(a||(e[ql]=a=new vo(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=xT(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)AT||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Md(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function xT(){function e(n){return t.call(e.src,e.listener,n)}const t=NT;return e}function Nd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Nd(e,t[i],n,r,s);return null}return n=Kl(n),e&&e[Ls]?e.P(t,n,Ms(r)?!!r.capture:!!r,s):xd(e,t,n,!0,r,s)}function Od(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Od(e,t[i],n,r,s);else r=Ms(r)?!!r.capture:!!r,n=Kl(n),e&&e[Ls]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Ka(i,n,r,s),-1<n&&(Eo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=zl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ka(t,n,r,s)),(n=-1<e?t[e]:null)&&Hl(n))}function Hl(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Ls])za(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Md(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=zl(t))?(za(n,e),n.h==0&&(n.src=null,t[ql]=null)):Eo(e)}}}function Md(e){return e in ca?ca[e]:ca[e]="on"+e}function NT(e,t){if(e.fa)e=!0;else{t=new ws(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Hl(e),e=n.call(r,t)}return e}function zl(e){return e=e[ql],e instanceof vo?e:null}var ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kl(e){return typeof e=="function"?e:(e[ua]||(e[ua]=function(t){return e.handleEvent(t)}),e[ua])}function Dt(){An.call(this),this.i=new vo(this),this.S=this,this.J=null}xt(Dt,An);Dt.prototype[Ls]=!0;Dt.prototype.removeEventListener=function(e,t,n,r){Od(this,e,t,n,r)};function Ft(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Xt(t,e);else if(t instanceof Xt)t.target=t.target||e;else{var s=t;t=new Xt(r,e),Vd(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=li(o,r,!0,t)&&s}if(o=t.g=e,s=li(o,r,!0,t)&&s,s=li(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=li(o,r,!1,t)&&s}Dt.prototype.N=function(){if(Dt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Eo(n[r]);delete e.g[t],e.h--}}this.J=null};Dt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Dt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function li(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&za(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Wl=W.JSON.stringify;class OT{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function MT(){var e=Gl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class LT{constructor(){this.h=this.g=null}add(t,n){const r=Ld.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Ld=new OT(()=>new FT,e=>e.reset());class FT{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function UT(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function BT(e){W.setTimeout(()=>{throw e},0)}let Is,As=!1,Gl=new LT,Fd=()=>{const e=W.Promise.resolve(void 0);Is=()=>{e.then($T)}};var $T=()=>{for(var e;e=MT();){try{e.h.call(e.g)}catch(n){BT(n)}var t=Ld;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}As=!1};function To(e,t){Dt.call(this),this.h=e||1,this.g=t||W,this.j=Qt(this.qb,this),this.l=Date.now()}xt(To,Dt);V=To.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ft(this,"tick"),this.ga&&(Ql(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ql(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}V.N=function(){To.$.N.call(this),Ql(this),delete this.g};function Xl(e,t,n){if(typeof e=="function")n&&(e=Qt(e,n));else if(e&&typeof e.handleEvent=="function")e=Qt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:W.setTimeout(e,t||0)}function Ud(e){e.g=Xl(()=>{e.g=null,e.i&&(e.i=!1,Ud(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class jT extends An{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Ud(this)}N(){super.N(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(e){An.call(this),this.h=e,this.g={}}xt(Rs,An);var Ju=[];function Bd(e,t,n,r){Array.isArray(n)||(n&&(Ju[0]=n.toString()),n=Ju);for(var s=0;s<n.length;s++){var i=Dd(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function $d(e){jl(e.g,function(t,n){this.g.hasOwnProperty(n)&&Hl(t)},e),e.g={}}Rs.prototype.N=function(){Rs.$.N.call(this),$d(this)};Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wo(){this.g=!0}wo.prototype.Ea=function(){this.g=!1};function qT(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function HT(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function cr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+KT(e,n)+(r?" "+r:"")})}function zT(e,t){e.info(function(){return"TIMEOUT: "+t})}wo.prototype.info=function(){};function KT(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Wl(n)}catch{return t}}var Qn={},Zu=null;function Io(){return Zu=Zu||new Dt}Qn.Ta="serverreachability";function jd(e){Xt.call(this,Qn.Ta,e)}xt(jd,Xt);function Cs(e){const t=Io();Ft(t,new jd(t))}Qn.STAT_EVENT="statevent";function qd(e,t){Xt.call(this,Qn.STAT_EVENT,e),this.stat=t}xt(qd,Xt);function ne(e){const t=Io();Ft(t,new qd(t,e))}Qn.Ua="timingevent";function Hd(e,t){Xt.call(this,Qn.Ua,e),this.size=t}xt(Hd,Xt);function Fs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){e()},t)}var Ao={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yl(){}Yl.prototype.h=null;function th(e){return e.h||(e.h=e.i())}function Kd(){}var Us={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jl(){Xt.call(this,"d")}xt(Jl,Xt);function Zl(){Xt.call(this,"c")}xt(Zl,Xt);var Wa;function Ro(){}xt(Ro,Yl);Ro.prototype.g=function(){return new XMLHttpRequest};Ro.prototype.i=function(){return{}};Wa=new Ro;function Bs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Rs(this),this.P=WT,e=ja?125:void 0,this.V=new To(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Wd}function Wd(){this.i=null,this.g="",this.h=!1}var WT=45e3,Ga={},Ui={};V=Bs.prototype;V.setTimeout=function(e){this.P=e};function Qa(e,t,n){e.L=1,e.v=bo(Ye(t)),e.s=n,e.S=!0,Gd(e,null)}function Gd(e,t){e.G=Date.now(),$s(e),e.A=Ye(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),np(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Wd,e.g=Ip(e.l,n?t:null,!e.s),0<e.O&&(e.M=new jT(Qt(e.Pa,e,e.g),e.O)),Bd(e.U,e.g,"readystatechange",e.nb),t=e.I?kd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Cs(),qT(e.j,e.u,e.A,e.m,e.W,e.s)}V.nb=function(e){e=e.target;const t=this.M;t&&Le(e)==3?t.l():this.Pa(e)};V.Pa=function(e){try{if(e==this.g)t:{const u=Le(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||ja||this.g&&(this.h.h||this.g.ja()||sh(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Cs(3):Cs(2)),Co(this);var n=this.g.da();this.ca=n;e:if(Qd(this)){var r=sh(this.g);e="";var s=r.length,i=Le(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),as(this);var o="";break e}this.h.i=new W.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,HT(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ts(a)){var c=a;break e}}c=null}if(n=c)cr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xa(this,n);else{this.i=!1,this.o=3,ne(12),Nn(this),as(this);break t}}this.S?(Xd(this,u,o),ja&&this.i&&u==3&&(Bd(this.U,this.V,"tick",this.mb),this.V.start())):(cr(this.j,this.m,o,null),Xa(this,o)),u==4&&Nn(this),this.i&&!this.J&&(u==4?Ep(this.l,this):(this.i=!1,$s(this)))}else pw(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,ne(12)):(this.o=0,ne(13)),Nn(this),as(this)}}}catch{}finally{}};function Qd(e){return e.g?e.u=="GET"&&e.L!=2&&e.l.Ha:!1}function Xd(e,t,n){let r=!0,s;for(;!e.J&&e.C<n.length;)if(s=GT(e,n),s==Ui){t==4&&(e.o=4,ne(14),r=!1),cr(e.j,e.m,null,"[Incomplete Response]");break}else if(s==Ga){e.o=4,ne(15),cr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else cr(e.j,e.m,s,null),Xa(e,s);Qd(e)&&s!=Ui&&s!=Ga&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,ne(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ic(t),t.M=!0,ne(11))):(cr(e.j,e.m,n,"[Invalid Chunked Response]"),Nn(e),as(e))}V.mb=function(){if(this.g){var e=Le(this.g),t=this.g.ja();this.C<t.length&&(Co(this),Xd(this,e,t),this.i&&e!=4&&$s(this))}};function GT(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?Ui:(n=Number(t.substring(n,r)),isNaN(n)?Ga:(r+=1,r+n>t.length?Ui:(t=t.slice(r,r+n),e.C=r+n,t)))}V.cancel=function(){this.J=!0,Nn(this)};function $s(e){e.Y=Date.now()+e.P,Yd(e,e.P)}function Yd(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Fs(Qt(e.lb,e),t)}function Co(e){e.B&&(W.clearTimeout(e.B),e.B=null)}V.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(zT(this.j,this.A),this.L!=2&&(Cs(),ne(17)),Nn(this),this.o=2,as(this)):Yd(this,this.Y-e)};function as(e){e.l.H==0||e.J||Ep(e.l,e)}function Nn(e){Co(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Ql(e.V),$d(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Xa(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||Ya(n.i,e))){if(!e.K&&Ya(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)ji(n),ko(n);else break t;sc(n),ne(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Fs(Qt(n.ib,n),6e3));if(1>=ip(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else On(n,11)}else if((e.K||n.g==e)&&ji(n),!Ts(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=e.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var i=r.i;i.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(tc(i,i.h),i.h=null))}if(r.F){const I=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,gt(r.I,r.F,I))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=wp(r,r.J?r.pa:null,r.Y),o.K){op(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Co(a),$s(a)),r.g=o}else _p(r);0<n.j.length&&Vo(n)}else c[0]!="stop"&&c[0]!="close"||On(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?On(n,7):rc(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Cs(4)}catch{}}function QT(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(_o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function XT(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(_o(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Jd(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(_o(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=XT(e),r=QT(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var Zd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YT(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Un(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Un){this.h=e.h,Bi(this,e.j),this.s=e.s,this.g=e.g,$i(this,e.m),this.l=e.l;var t=e.i,n=new bs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),eh(this,n),this.o=e.o}else e&&(t=String(e).match(Zd))?(this.h=!1,Bi(this,t[1]||"",!0),this.s=Jr(t[2]||""),this.g=Jr(t[3]||"",!0),$i(this,t[4]),this.l=Jr(t[5]||"",!0),eh(this,t[6]||"",!0),this.o=Jr(t[7]||"")):(this.h=!1,this.i=new bs(null,this.h))}Un.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zr(t,nh,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Zr(t,nh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Zr(n,n.charAt(0)=="/"?tw:ZT,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zr(n,nw)),e.join("")};function Ye(e){return new Un(e)}function Bi(e,t,n){e.j=n?Jr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $i(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function eh(e,t,n){t instanceof bs?(e.i=t,rw(e.i,e.h)):(n||(t=Zr(t,ew)),e.i=new bs(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function bo(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Jr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,JT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function JT(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var nh=/[#\/\?@]/g,ZT=/[#\?:]/g,tw=/[#\?]/g,ew=/[#\?@]/g,nw=/#/g;function bs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rn(e){e.g||(e.g=new Map,e.h=0,e.i&&YT(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}V=bs.prototype;V.add=function(e,t){Rn(this),this.i=null,e=Or(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function tp(e,t){Rn(e),t=Or(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ep(e,t){return Rn(e),t=Or(e,t),e.g.has(t)}V.forEach=function(e,t){Rn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};V.ta=function(){Rn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};V.Z=function(e){Rn(this);let t=[];if(typeof e=="string")ep(this,e)&&(t=t.concat(this.g.get(Or(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};V.set=function(e,t){return Rn(this),this.i=null,e=Or(this,e),ep(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};V.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function np(e,t,n){tp(e,t),0<n.length&&(e.i=null,e.g.set(Or(e,t),Bl(n)),e.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function Or(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function rw(e,t){t&&!e.j&&(Rn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(tp(this,r),np(this,s,n))},e)),e.j=t}var sw=class{constructor(e,t){this.g=e,this.map=t}};function rp(e){this.l=e||iw,W.PerformanceNavigationTiming?(e=W.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(W.g&&W.g.Ka&&W.g.Ka()&&W.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var iw=10;function sp(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function ip(e){return e.h?1:e.g?e.g.size:0}function Ya(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function tc(e,t){e.g?e.g.add(t):e.h=t}function op(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}rp.prototype.cancel=function(){if(this.i=ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function ap(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Bl(e.i)}var ow=class{stringify(e){return W.JSON.stringify(e,void 0)}parse(e){return W.JSON.parse(e,void 0)}};function aw(){this.g=new ow}function lw(e,t,n){const r=n||"";try{Jd(e,function(s,i){let o=s;Ms(s)&&(o=Wl(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function cw(e,t){const n=new wo;if(W.Image){const r=new Image;r.onload=ai(ci,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ai(ci,n,r,"TestLoadImage: error",!1,t),r.onabort=ai(ci,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ai(ci,n,r,"TestLoadImage: timeout",!1,t),W.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function ci(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function js(e){this.l=e.ec||null,this.j=e.ob||!1}xt(js,Yl);js.prototype.g=function(){return new Po(this.l,this.j)};js.prototype.i=function(e){return function(){return e}}({});function Po(e,t){Dt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ec,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xt(Po,Dt);var ec=0;V=Po.prototype;V.open=function(e,t){if(this.readyState!=ec)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ps(this)};V.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||W).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=ec};V.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof W.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function lp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}V.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qs(this):Ps(this),this.readyState==3&&lp(this)}};V.Za=function(e){this.g&&(this.response=this.responseText=e,qs(this))};V.Ya=function(e){this.g&&(this.response=e,qs(this))};V.ka=function(){this.g&&qs(this)};function qs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ps(e)}V.setRequestHeader=function(e,t){this.v.append(e,t)};V.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Ps(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var uw=W.JSON.parse;function Tt(e){Dt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cp,this.L=this.M=!1}xt(Tt,Dt);var cp="",hw=/^https?$/i,fw=["POST","PUT"];V=Tt.prototype;V.Oa=function(e){this.M=e};V.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wa.g(),this.C=this.u?th(this.u):th(Wa),this.g.onreadystatechange=Qt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){rh(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=W.FormData&&e instanceof W.FormData,!(0<=Cd(fw,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fp(this),0<this.B&&((this.L=dw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qt(this.ua,this)):this.A=Xl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){rh(this,i)}};function dw(e){return Ir&&typeof e.timeout=="number"&&e.ontimeout!==void 0}V.ua=function(){typeof Ul<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ft(this,"timeout"),this.abort(8))};function rh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,up(e),So(e)}function up(e){e.F||(e.F=!0,Ft(e,"complete"),Ft(e,"error"))}V.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ft(this,"complete"),Ft(this,"abort"),So(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),So(this,!0)),Tt.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?hp(this):this.kb())};V.kb=function(){hp(this)};function hp(e){if(e.h&&typeof Ul<"u"&&(!e.C[1]||Le(e)!=4||e.da()!=2)){if(e.v&&Le(e)==4)Xl(e.La,0,e);else if(Ft(e,"readystatechange"),Le(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(Zd)[1]||null;!s&&W.self&&W.self.location&&(s=W.self.location.protocol.slice(0,-1)),r=!hw.test(s?s.toLowerCase():"")}n=r}if(n)Ft(e,"complete"),Ft(e,"success");else{e.m=6;try{var i=2<Le(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",up(e)}}finally{So(e)}}}}function So(e,t){if(e.g){fp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ft(e,"ready");try{n.onreadystatechange=r}catch{}}}function fp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(W.clearTimeout(e.A),e.A=null)}V.isActive=function(){return!!this.g};function Le(e){return e.g?e.g.readyState:0}V.da=function(){try{return 2<Le(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),uw(t)}};function sh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case cp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function pw(e){const t={};e=(e.g&&2<=Le(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Ts(e[r]))continue;var n=UT(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}DT(t,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function dp(e){let t="";return jl(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function nc(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=dp(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):gt(e,t,n))}function Kr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function pp(e){this.Ga=0,this.j=[],this.l=new wo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Kr("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Kr("baseRetryDelayMs",5e3,e),this.hb=Kr("retryDelaySeedMs",1e4,e),this.eb=Kr("forwardChannelMaxRetries",2,e),this.xa=Kr("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new rp(e&&e.concurrentRequestLimit),this.Ja=new aw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=pp.prototype;V.ra=8;V.H=1;function rc(e){if(mp(e),e.H==3){var t=e.W++,n=Ye(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),Hs(e,n),t=new Bs(e,e.l,t),t.L=2,t.v=bo(Ye(n)),n=!1,W.navigator&&W.navigator.sendBeacon)try{n=W.navigator.sendBeacon(t.v.toString(),"")}catch{}!n&&W.Image&&(new Image().src=t.v,n=!0),n||(t.g=Ip(t.l,null),t.g.ha(t.v)),t.G=Date.now(),$s(t)}Tp(e)}function ko(e){e.g&&(ic(e),e.g.cancel(),e.g=null)}function mp(e){ko(e),e.u&&(W.clearTimeout(e.u),e.u=null),ji(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&W.clearTimeout(e.m),e.m=null)}function Vo(e){if(!sp(e.i)&&!e.m){e.m=!0;var t=e.Na;Is||Fd(),As||(Is(),As=!0),Gl.add(t,e),e.C=0}}function mw(e,t){return ip(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Fs(Qt(e.Na,e,t),vp(e,e.C)),e.C++,!0)}V.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Bs(this,this.l,e);let i=this.s;if(this.U&&(i?(i=kd(i),Vd(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=gp(this,s,t),n=Ye(this.I),gt(n,"RID",e),gt(n,"CVER",22),this.F&&gt(n,"X-HTTP-Session-Id",this.F),Hs(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(dp(i)))+"&"+t:this.o&&nc(n,this.o,i)),tc(this.i,s),this.bb&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),s.aa=!0,Qa(s,n,null)):Qa(s,n,t),this.H=2}}else this.H==3&&(e?ih(this,e):this.j.length==0||sp(this.i)||ih(this))};function ih(e,t){var n;t?n=t.m:n=e.W++;const r=Ye(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.V),Hs(e,r),e.o&&e.s&&nc(r,e.o,e.s),n=new Bs(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=gp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),tc(e.i,n),Qa(n,r,t)}function Hs(e,t){e.na&&jl(e.na,function(n,r){gt(t,r,n)}),e.h&&Jd({},function(n,r){gt(t,r,n)})}function gp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Qt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{lw(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function _p(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Is||Fd(),As||(Is(),As=!0),Gl.add(t,e),e.A=0}}function sc(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Fs(Qt(e.Ma,e),vp(e,e.A)),e.A++,!0)}V.Ma=function(){if(this.u=null,yp(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Fs(Qt(this.jb,this),e)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ne(10),ko(this),yp(this))};function ic(e){e.B!=null&&(W.clearTimeout(e.B),e.B=null)}function yp(e){e.g=new Bs(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Ye(e.wa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.V),gt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&gt(t,"TO",e.qa),gt(t,"TYPE","xmlhttp"),Hs(e,t),e.o&&e.s&&nc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=bo(Ye(t)),n.s=null,n.S=!0,Gd(n,e)}V.ib=function(){this.v!=null&&(this.v=null,ko(this),sc(this),ne(19))};function ji(e){e.v!=null&&(W.clearTimeout(e.v),e.v=null)}function Ep(e,t){var n=null;if(e.g==t){ji(e),ic(e),e.g=null;var r=2}else if(Ya(e.i,t))n=t.F,op(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;r=Io(),Ft(r,new Hd(r,n)),Vo(e)}else _p(e);else if(s=t.o,s==3||s==0&&0<t.ca||!(r==1&&mw(e,t)||r==2&&sc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:On(e,5);break;case 4:On(e,10);break;case 3:On(e,6);break;default:On(e,2)}}}function vp(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function On(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Qt(e.pb,e);n||(n=new Un("//www.google.com/images/cleardot.gif"),W.location&&W.location.protocol=="http"||Bi(n,"https"),bo(n)),cw(n.toString(),r)}else ne(2);e.H=0,e.h&&e.h.za(t),Tp(e),mp(e)}V.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ne(2)):(this.l.info("Failed to ping google.com"),ne(1))};function Tp(e){if(e.H=0,e.ma=[],e.h){const t=ap(e.i);(t.length!=0||e.j.length!=0)&&(Qu(e.ma,t),Qu(e.ma,e.j),e.i.i.length=0,Bl(e.j),e.j.length=0),e.h.ya()}}function wp(e,t,n){var r=n instanceof Un?Ye(n):new Un(n);if(r.g!="")t&&(r.g=t+"."+r.g),$i(r,r.m);else{var s=W.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Un(null);r&&Bi(i,r),t&&(i.g=t),s&&$i(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&gt(r,n,t),gt(r,"VER",e.ra),Hs(e,r),r}function Ip(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new Tt(new js({ob:!0})):new Tt(e.va),t.Oa(e.J),t}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function Ap(){}V=Ap.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function qi(){if(Ir&&!(10<=Number(PT)))throw Error("Environmental error: no available transport.")}qi.prototype.g=function(e,t){return new ge(e,t)};function ge(e,t){Dt.call(this),this.g=new pp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ts(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ts(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Mr(this)}xt(ge,Dt);ge.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ne(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=wp(e,null,e.Y),Vo(e)};ge.prototype.close=function(){rc(this.g)};ge.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Wl(e),e=n);t.j.push(new sw(t.fb++,e)),t.H==3&&Vo(t)};ge.prototype.N=function(){this.g.h=null,delete this.j,rc(this.g),delete this.g,ge.$.N.call(this)};function Rp(e){Jl.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}xt(Rp,Jl);function Cp(){Zl.call(this),this.status=1}xt(Cp,Zl);function Mr(e){this.g=e}xt(Mr,Ap);Mr.prototype.Ba=function(){Ft(this.g,"a")};Mr.prototype.Aa=function(e){Ft(this.g,new Rp(e))};Mr.prototype.za=function(e){Ft(this.g,new Cp)};Mr.prototype.ya=function(){Ft(this.g,"b")};function gw(){this.blockSize=-1}function Pe(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}xt(Pe,gw);Pe.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ha(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}Pe.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)ha(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){ha(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){ha(this,r),s=0;break}}this.h=s,this.i+=t};Pe.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function ct(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var _w={};function oc(e){return-128<=e&&128>e?RT(e,function(t){return new ct([t|0],0>t?-1:0)}):new ct([e|0],0>e?-1:0)}function Fe(e){if(isNaN(e)||!isFinite(e))return pr;if(0>e)return Ot(Fe(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ja;return new ct(t,0)}function bp(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Ot(bp(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Fe(Math.pow(t,8)),r=pr,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Fe(Math.pow(t,i)),r=r.R(i).add(Fe(o))):(r=r.R(n),r=r.add(Fe(o)))}return r}var Ja=4294967296,pr=oc(0),Za=oc(1),oh=oc(16777216);V=ct.prototype;V.ea=function(){if(_e(this))return-Ot(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ja+r)*t,t*=Ja}return e};V.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ge(this))return"0";if(_e(this))return"-"+Ot(this).toString(e);for(var t=Fe(Math.pow(e,6)),n=this,r="";;){var s=zi(n,t).g;n=Hi(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Ge(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};V.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Ge(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function _e(e){return e.h==-1}V.X=function(e){return e=Hi(this,e),_e(e)?-1:Ge(e)?0:1};function Ot(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ct(n,~e.h).add(Za)}V.abs=function(){return _e(this)?Ot(this):this};V.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ct(n,n[n.length-1]&-2147483648?-1:0)};function Hi(e,t){return e.add(Ot(t))}V.R=function(e){if(Ge(this)||Ge(e))return pr;if(_e(this))return _e(e)?Ot(this).R(Ot(e)):Ot(Ot(this).R(e));if(_e(e))return Ot(this.R(Ot(e)));if(0>this.X(oh)&&0>e.X(oh))return Fe(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,ui(n,2*r+2*s),n[2*r+2*s+1]+=i*l,ui(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,ui(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,ui(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ct(n,0)};function ui(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Wr(e,t){this.g=e,this.h=t}function zi(e,t){if(Ge(t))throw Error("division by zero");if(Ge(e))return new Wr(pr,pr);if(_e(e))return t=zi(Ot(e),t),new Wr(Ot(t.g),Ot(t.h));if(_e(t))return t=zi(e,Ot(t)),new Wr(Ot(t.g),t.h);if(30<e.g.length){if(_e(e)||_e(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Za,r=t;0>=r.X(e);)n=ah(n),r=ah(r);var s=rr(n,1),i=rr(r,1);for(r=rr(r,2),n=rr(n,2);!Ge(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=rr(r,1),n=rr(n,1)}return t=Hi(e,s.R(t)),new Wr(s,t)}for(s=pr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Fe(n),o=i.R(t);_e(o)||0<o.X(e);)n-=r,i=Fe(n),o=i.R(t);Ge(i)&&(i=Za),s=s.add(i),e=Hi(e,o)}return new Wr(s,e)}V.gb=function(e){return zi(this,e).h};V.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ct(n,this.h&e.h)};V.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ct(n,this.h|e.h)};V.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ct(n,this.h^e.h)};function ah(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ct(n,e.h)}function rr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new ct(s,e.h)}qi.prototype.createWebChannel=qi.prototype.g;ge.prototype.send=ge.prototype.u;ge.prototype.open=ge.prototype.m;ge.prototype.close=ge.prototype.close;Ao.NO_ERROR=0;Ao.TIMEOUT=8;Ao.HTTP_ERROR=6;zd.COMPLETE="complete";Kd.EventType=Us;Us.OPEN="a";Us.CLOSE="b";Us.ERROR="c";Us.MESSAGE="d";Dt.prototype.listen=Dt.prototype.O;Tt.prototype.listenOnce=Tt.prototype.P;Tt.prototype.getLastError=Tt.prototype.Sa;Tt.prototype.getLastErrorCode=Tt.prototype.Ia;Tt.prototype.getStatus=Tt.prototype.da;Tt.prototype.getResponseJson=Tt.prototype.Wa;Tt.prototype.getResponseText=Tt.prototype.ja;Tt.prototype.send=Tt.prototype.ha;Tt.prototype.setWithCredentials=Tt.prototype.Oa;Pe.prototype.digest=Pe.prototype.l;Pe.prototype.reset=Pe.prototype.reset;Pe.prototype.update=Pe.prototype.j;ct.prototype.add=ct.prototype.add;ct.prototype.multiply=ct.prototype.R;ct.prototype.modulo=ct.prototype.gb;ct.prototype.compare=ct.prototype.X;ct.prototype.toNumber=ct.prototype.ea;ct.prototype.toString=ct.prototype.toString;ct.prototype.getBits=ct.prototype.D;ct.fromNumber=Fe;ct.fromString=bp;var yw=function(){return new qi},Ew=function(){return Io()},fa=Ao,vw=zd,Tw=Qn,lh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ww=js,hi=Kd,Iw=Tt,Aw=Pe,mr=ct;const ch="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lr="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new _d("@firebase/firestore");function Gr(){return qn.logLevel}function L(e,...t){if(qn.logLevel<=nt.DEBUG){const n=t.map(ac);qn.debug(`Firestore (${Lr}): ${e}`,...n)}}function Je(e,...t){if(qn.logLevel<=nt.ERROR){const n=t.map(ac);qn.error(`Firestore (${Lr}): ${e}`,...n)}}function Ar(e,...t){if(qn.logLevel<=nt.WARN){const n=t.map(ac);qn.warn(`Firestore (${Lr}): ${e}`,...n)}}function ac(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e="Unexpected state"){const t=`FIRESTORE (${Lr}) INTERNAL ASSERTION FAILED: `+e;throw Je(t),new Error(t)}function yt(e,t){e||z()}function Y(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Gn{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Rw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class Cw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bw{constructor(t){this.t=t,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string"),new Pp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string"),new qt(t)}}class Pw{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Sw{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Pw(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vw{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(yt(typeof n.token=="string"),this.R=n.token,new kw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=Dw(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function rt(e,t){return e<t?-1:e>t?1:0}function Rr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Pt.fromMillis(Date.now())}static fromDate(t){return Pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rt(this.nanoseconds,t.nanoseconds):rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.timestamp=t}static fromTimestamp(t){return new G(t)}static min(){return new G(new Pt(0,0))}static max(){return new G(new Pt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,n,r){n===void 0?n=0:n>t.length&&z(),r===void 0?r=t.length-n:r>t.length-n&&z(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ss.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ss?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class _t extends Ss{construct(t,n,r){return new _t(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const xw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Ss{construct(t,n,r){return new Lt(t,n,r)}static isValidIdentifier(t){return xw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.path=t}static fromPath(t){return new j(_t.fromString(t))}static fromName(t){return new j(_t.fromString(t).popFirst(5))}static empty(){return new j(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_t.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _t.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new j(new _t(t.slice()))}}function Nw(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new Tn(s,j.empty(),t)}function Ow(e){return new Tn(e.readTime,e.key,-1)}class Tn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Tn(G.min(),j.empty(),-1)}static max(){return new Tn(G.max(),j.empty(),-1)}}function Mw(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=j.comparator(e.documentKey,t.documentKey),n!==0?n:rt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(e){if(e.code!==v.FAILED_PRECONDITION||e.message!==Lw)throw e;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new R((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):R.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):R.reject(n)}static resolve(t){return new R((n,r)=>{n(t)})}static reject(t){return new R((n,r)=>{r(t)})}static waitFor(t){return new R((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=R.resolve(!1);for(const r of t)n=n.next(s=>s?R.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new R((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new R((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Ks(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}lc._e=-1;function Do(e){return e==null}function Ki(e){return e===0&&1/e==-1/0}function Uw(e){return typeof e=="number"&&Number.isInteger(e)&&!Ki(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function kp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t,n){this.comparator=t,this.root=n||Nt.EMPTY}insert(t,n){return new vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(t){return new vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fi(this.root,t,this.comparator,!1)}getReverseIterator(){return new fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fi(this.root,t,this.comparator,!0)}}class fi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Nt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Nt.RED,this.left=s??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Nt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const t=this.left.check();if(t!==this.right.check())throw z();return t+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,n,r,s,i){return this}insert(t,n,r){return new Nt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.comparator=t,this.data=new vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new hh(this.data.getIterator())}getIteratorFrom(t){return new hh(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ut)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ut(this.comparator);return n.data=t,n}}class hh{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.fields=t,t.sort(Lt.comparator)}static empty(){return new fe([])}unionWith(t){let n=new Ut(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new fe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Rr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Vp("Invalid base64 string: "+i):i}}(t);return new Yt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new Yt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const Bw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wn(e){if(yt(!!e),typeof e=="string"){let t=0;const n=Bw.exec(e);if(yt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ct(e.seconds),nanos:Ct(e.nanos)}}function Ct(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Hn(e){return typeof e=="string"?Yt.fromBase64String(e):Yt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uc(e){const t=e.mapValue.fields.__previous_value__;return cc(t)?uc(t):t}function ks(e){const t=wn(e.mapValue.fields.__local_write_time__.timestampValue);return new Pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Vs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Vs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Vs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cc(e)?4:jw(e)?9007199254740991:10:z()}function He(e,t){if(e===t)return!0;const n=zn(e);if(n!==zn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ks(e).isEqual(ks(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=wn(s.timestampValue),a=wn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Hn(s.bytesValue).isEqual(Hn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Ct(s.geoPointValue.latitude)===Ct(i.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ct(s.integerValue)===Ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ct(s.doubleValue),a=Ct(i.doubleValue);return o===a?Ki(o)===Ki(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Rr(e.arrayValue.values||[],t.arrayValue.values||[],He);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(uh(o)!==uh(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!He(o[l],a[l])))return!1;return!0}(e,t);default:return z()}}function Ds(e,t){return(e.values||[]).find(n=>He(n,t))!==void 0}function Cr(e,t){if(e===t)return 0;const n=zn(e),r=zn(t);if(n!==r)return rt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rt(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Ct(i.integerValue||i.doubleValue),l=Ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return fh(e.timestampValue,t.timestampValue);case 4:return fh(ks(e),ks(t));case 5:return rt(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Hn(i),l=Hn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=rt(a[c],l[c]);if(u!==0)return u}return rt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=rt(Ct(i.latitude),Ct(o.latitude));return a!==0?a:rt(Ct(i.longitude),Ct(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Cr(a[c],l[c]);if(u)return u}return rt(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===di.mapValue&&o===di.mapValue)return 0;if(i===di.mapValue)return 1;if(o===di.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=rt(l[h],u[h]);if(f!==0)return f;const m=Cr(a[l[h]],c[u[h]]);if(m!==0)return m}return rt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw z()}}function fh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return rt(e,t);const n=wn(e),r=wn(t),s=rt(n.seconds,r.seconds);return s!==0?s:rt(n.nanos,r.nanos)}function br(e){return tl(e)}function tl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=wn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Hn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return j.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=tl(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${tl(n.fields[o])}`;return s+"}"}(e.mapValue):z()}function dh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function el(e){return!!e&&"integerValue"in e}function hc(e){return!!e&&"arrayValue"in e}function ph(e){return!!e&&"nullValue"in e}function mh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ri(e){return!!e&&"mapValue"in e}function ls(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xn(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ls(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ls(e.arrayValue.values[n]);return t}return Object.assign({},e)}function jw(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.value=t}static empty(){return new ae({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ri(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ls(n)}setAll(t){let n=Lt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ls(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ri(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return He(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ri(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Xn(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new ae(ls(this.value))}}function Dp(e){const t=[];return Xn(e.fields,(n,r)=>{const s=new Lt([n]);if(Ri(r)){const i=Dp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new fe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new zt(t,0,G.min(),G.min(),G.min(),ae.empty(),0)}static newFoundDocument(t,n,r,s){return new zt(t,1,n,G.min(),r,s,0)}static newNoDocument(t,n){return new zt(t,2,n,G.min(),G.min(),ae.empty(),0)}static newUnknownDocument(t,n){return new zt(t,3,n,G.min(),G.min(),ae.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ae.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ae.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t,n){this.position=t,this.inclusive=n}}function gh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=Cr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _h(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!He(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,n="asc"){this.field=t,this.dir=n}}function qw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{}class bt extends xp{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new zw(t,n,r):n==="array-contains"?new Gw(t,r):n==="in"?new Qw(t,r):n==="not-in"?new Xw(t,r):n==="array-contains-any"?new Yw(t,r):new bt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Kw(t,r):new Ww(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cr(n,this.value)):n!==null&&zn(this.value)===zn(n)&&this.matchesComparison(Cr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends xp{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new Se(t,n)}matches(t){return Np(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Np(e){return e.op==="and"}function Op(e){return Hw(e)&&Np(e)}function Hw(e){for(const t of e.filters)if(t instanceof Se)return!1;return!0}function nl(e){if(e instanceof bt)return e.field.canonicalString()+e.op.toString()+br(e.value);if(Op(e))return e.filters.map(t=>nl(t)).join(",");{const t=e.filters.map(n=>nl(n)).join(",");return`${e.op}(${t})`}}function Mp(e,t){return e instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.field.isEqual(s.field)&&He(r.value,s.value)}(e,t):e instanceof Se?function(r,s){return s instanceof Se&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Mp(o,s.filters[a]),!0):!1}(e,t):void z()}function Lp(e){return e instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${br(n.value)}`}(e):e instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(Lp).join(" ,")+"}"}(e):"Filter"}class zw extends bt{constructor(t,n,r){super(t,n,r),this.key=j.fromName(r.referenceValue)}matches(t){const n=j.comparator(t.key,this.key);return this.matchesComparison(n)}}class Kw extends bt{constructor(t,n){super(t,"in",n),this.keys=Fp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Ww extends bt{constructor(t,n){super(t,"not-in",n),this.keys=Fp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Fp(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class Gw extends bt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return hc(n)&&Ds(n.arrayValue,this.value)}}class Qw extends bt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ds(this.value.arrayValue,n)}}class Xw extends bt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ds(this.value.arrayValue,n)}}class Yw extends bt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!hc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ds(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function yh(e,t=null,n=[],r=[],s=null,i=null,o=null){return new Jw(e,t,n,r,s,i,o)}function fc(e){const t=Y(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>nl(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Do(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>br(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>br(r)).join(",")),t.ce=n}return t.ce}function dc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_h(e.startAt,t.startAt)&&_h(e.endAt,t.endAt)}function rl(e){return j.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Zw(e,t,n,r,s,i,o,a){return new Ws(e,t,n,r,s,i,o,a)}function Up(e){return new Ws(e)}function Eh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Bp(e){return e.collectionGroup!==null}function cs(e){const t=Y(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ut(Lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new Gi(i,r))}),n.has(Lt.keyField().canonicalString())||t.le.push(new Gi(Lt.keyField(),r))}return t.le}function $e(e){const t=Y(e);return t.he||(t.he=tI(t,cs(e))),t.he}function tI(e,t){if(e.limitType==="F")return yh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Gi(s.field,i)});const n=e.endAt?new Wi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wi(e.startAt.position,e.startAt.inclusive):null;return yh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function sl(e,t){const n=e.filters.concat([t]);return new Ws(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function il(e,t,n){return new Ws(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xo(e,t){return dc($e(e),$e(t))&&e.limitType===t.limitType}function $p(e){return`${fc($e(e))}|lt:${e.limitType}`}function or(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Lp(s)).join(", ")}]`),Do(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>br(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>br(s)).join(",")),`Target(${r})`}($e(e))}; limitType=${e.limitType})`}function No(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):j.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of cs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=gh(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,cs(r),s)||r.endAt&&!function(o,a,l){const c=gh(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,cs(r),s))}(e,t)}function eI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jp(e){return(t,n)=>{let r=!1;for(const s of cs(e)){const i=nI(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nI(e,t,n){const r=e.field.isKeyField()?j.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Cr(l,c):z()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Xn(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return kp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new vt(j.comparator);function Ze(){return rI}const qp=new vt(j.comparator);function ts(...e){let t=qp;for(const n of e)t=t.insert(n.key,n);return t}function Hp(e){let t=qp;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Mn(){return us()}function zp(){return us()}function us(){return new Fr(e=>e.toString(),(e,t)=>e.isEqual(t))}const sI=new vt(j.comparator),iI=new Ut(j.comparator);function Z(...e){let t=iI;for(const n of e)t=t.add(n);return t}const oI=new Ut(rt);function aI(){return oI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ki(t)?"-0":t}}function Wp(e){return{integerValue:""+e}}function lI(e,t){return Uw(t)?Wp(t):Kp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this._=void 0}}function cI(e,t,n){return e instanceof Qi?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&cc(i)&&(i=uc(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof xs?Qp(e,t):e instanceof Ns?Xp(e,t):function(s,i){const o=Gp(s,i),a=vh(o)+vh(s.Ie);return el(o)&&el(s.Ie)?Wp(a):Kp(s.serializer,a)}(e,t)}function uI(e,t,n){return e instanceof xs?Qp(e,t):e instanceof Ns?Xp(e,t):n}function Gp(e,t){return e instanceof Xi?function(r){return el(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Qi extends Oo{}class xs extends Oo{constructor(t){super(),this.elements=t}}function Qp(e,t){const n=Yp(t);for(const r of e.elements)n.some(s=>He(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ns extends Oo{constructor(t){super(),this.elements=t}}function Xp(e,t){let n=Yp(t);for(const r of e.elements)n=n.filter(s=>!He(s,r));return{arrayValue:{values:n}}}class Xi extends Oo{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function vh(e){return Ct(e.integerValue||e.doubleValue)}function Yp(e){return hc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function hI(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof xs&&s instanceof xs||r instanceof Ns&&s instanceof Ns?Rr(r.elements,s.elements,He):r instanceof Xi&&s instanceof Xi?He(r.Ie,s.Ie):r instanceof Qi&&s instanceof Qi}(e.transform,t.transform)}class fI{constructor(t,n){this.version=t,this.transformResults=n}}class Ce{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ce}static exists(t){return new Ce(void 0,t)}static updateTime(t){return new Ce(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ci(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Mo{}function Jp(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new pc(e.key,Ce.none()):new Gs(e.key,e.data,Ce.none());{const n=e.data,r=ae.empty();let s=new Ut(Lt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Cn(e.key,r,new fe(s.toArray()),Ce.none())}}function dI(e,t,n){e instanceof Gs?function(s,i,o){const a=s.value.clone(),l=wh(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Cn?function(s,i,o){if(!Ci(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=wh(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Zp(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function hs(e,t,n,r){return e instanceof Gs?function(i,o,a,l){if(!Ci(i.precondition,o))return a;const c=i.value.clone(),u=Ih(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof Cn?function(i,o,a,l){if(!Ci(i.precondition,o))return a;const c=Ih(i.fieldTransforms,l,o),u=o.data;return u.setAll(Zp(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Ci(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function pI(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Gp(r.transform,s||null);i!=null&&(n===null&&(n=ae.empty()),n.set(r.field,i))}return n||null}function Th(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Rr(r,s,(i,o)=>hI(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gs extends Mo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cn extends Mo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Zp(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function wh(e,t,n){const r=new Map;yt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,uI(o,a,n[s]))}return r}function Ih(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,cI(i,o,t))}return r}class pc extends Mo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mI extends Mo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&dI(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=hs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=hs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=zp();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Jp(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Z())}isEqual(t){return this.batchId===t.batchId&&Rr(this.mutations,t.mutations,(n,r)=>Th(n,r))&&Rr(this.baseMutations,t.baseMutations,(n,r)=>Th(n,r))}}class mc{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){yt(t.mutations.length===r.length);let s=function(){return sI}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mc(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,tt;function EI(e){switch(e){default:return z();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function tm(e){if(e===void 0)return Je("GRPC error has no .code"),v.UNKNOWN;switch(e){case Rt.OK:return v.OK;case Rt.CANCELLED:return v.CANCELLED;case Rt.UNKNOWN:return v.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return v.INTERNAL;case Rt.UNAVAILABLE:return v.UNAVAILABLE;case Rt.UNAUTHENTICATED:return v.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case Rt.NOT_FOUND:return v.NOT_FOUND;case Rt.ALREADY_EXISTS:return v.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return v.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case Rt.ABORTED:return v.ABORTED;case Rt.OUT_OF_RANGE:return v.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return v.UNIMPLEMENTED;case Rt.DATA_LOSS:return v.DATA_LOSS;default:return z()}}(tt=Rt||(Rt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new mr([4294967295,4294967295],0);function Ah(e){const t=vI().encode(e),n=new Aw;return n.update(t),new Uint8Array(n.digest())}function Rh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new mr([n,r],0),new mr([s,i],0)]}class gc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new es(`Invalid padding: ${n}`);if(r<0)throw new es(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new es(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new es(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=mr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(mr.fromNumber(r)));return s.compare(TI)===1&&(s=new mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Ah(t),[r,s]=Rh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new gc(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Ah(t),[r,s]=Rh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class es extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Qs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Lo(G.min(),s,new vt(rt),Ze(),Z())}}class Qs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Qs(r,n,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class em{constructor(t,n){this.targetId=t,this.fe=n}}class nm{constructor(t,n,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ch{constructor(){this.ge=0,this.pe=Ph(),this.ye=Yt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Z(),n=Z(),r=Z();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:z()}}),new Qs(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=Ph()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class wI{constructor(t){this.Le=t,this.ke=new Map,this.qe=Ze(),this.Qe=bh(),this.Ke=new vt(rt)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:z()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(rl(i))if(r===0){const o=new j(i.path);this.We(n,o,zt.newNoDocument(o,G.min()))}else yt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Hn(r).toUint8Array()}catch(l){if(l instanceof Vp)return Ar("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gc(o,s,i)}catch(l){return Ar(l instanceof es?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&rl(a.target)){const l=new j(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,zt.newNoDocument(l,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=Z();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Lo(t,n,this.Ke,this.qe,r);return this.qe=Ze(),this.Qe=bh(),this.Ke=new vt(rt),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Ch,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Ut(rt),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||L("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Ch),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function bh(){return new vt(j.comparator)}function Ph(){return new vt(j.comparator)}const II=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),AI=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),RI=(()=>({and:"AND",or:"OR"}))();class CI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ol(e,t){return e.useProto3Json||Do(t)?t:{value:t}}function Yi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function rm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bI(e,t){return Yi(e,t.toTimestamp())}function je(e){return yt(!!e),G.fromTimestamp(function(n){const r=wn(n);return new Pt(r.seconds,r.nanos)}(e))}function _c(e,t){return function(r){return new _t(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function sm(e){const t=_t.fromString(e);return yt(lm(t)),t}function al(e,t){return _c(e.databaseId,t.path)}function da(e,t){const n=sm(t);if(n.get(1)!==e.databaseId.projectId)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new j(im(n))}function ll(e,t){return _c(e.databaseId,t)}function PI(e){const t=sm(e);return t.length===4?_t.emptyPath():im(t)}function cl(e){return new _t(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function im(e){return yt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Sh(e,t,n){return{name:al(e,t),fields:n.value.mapValue.fields}}function SI(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:z()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(yt(u===void 0||typeof u=="string"),Yt.fromBase64String(u||"")):(yt(u===void 0||u instanceof Uint8Array),Yt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?v.UNKNOWN:tm(c.code);return new M(u,c.message||"")}(o);n=new nm(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=da(e,r.document.name),i=je(r.document.updateTime),o=r.document.createTime?je(r.document.createTime):G.min(),a=new ae({mapValue:{fields:r.document.fields}}),l=zt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new bi(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=da(e,r.document),i=r.readTime?je(r.readTime):G.min(),o=zt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new bi([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=da(e,r.document),i=r.removedTargetIds||[];n=new bi([],i,s,null)}else{if(!("filter"in t))return z();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new yI(s,i),a=r.targetId;n=new em(a,o)}}return n}function kI(e,t){let n;if(t instanceof Gs)n={update:Sh(e,t.key,t.value)};else if(t instanceof pc)n={delete:al(e,t.key)};else if(t instanceof Cn)n={update:Sh(e,t.key,t.data),updateMask:UI(t.fieldMask)};else{if(!(t instanceof mI))return z();n={verify:al(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ns)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw z()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:z()}(e,t.precondition)),n}function VI(e,t){return e&&e.length>0?(yt(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?je(s.updateTime):je(i);return o.isEqual(G.min())&&(o=je(i)),new fI(o,s.transformResults||[])}(n,t))):[]}function DI(e,t){return{documents:[ll(e,t.path)]}}function xI(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=ll(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ll(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return am(Se.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:ar(h.field),direction:MI(h.dir)}}(c))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=ol(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function NI(e){let t=PI(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=om(h);return f instanceof Se&&Op(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(y){return new Gi(lr(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Do(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Wi(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Wi(m,f)}(n.endAt)),Zw(t,s,o,i,a,"F",l,c)}function OI(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function om(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lr(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lr(n.unaryFilter.field);return bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=lr(n.unaryFilter.field);return bt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lr(n.unaryFilter.field);return bt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(e):e.fieldFilter!==void 0?function(n){return bt.create(lr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>om(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(e):z()}function MI(e){return II[e]}function LI(e){return AI[e]}function FI(e){return RI[e]}function ar(e){return{fieldPath:e.canonicalString()}}function lr(e){return Lt.fromServerFormat(e.fieldPath)}function am(e){return e instanceof bt?function(n){if(n.op==="=="){if(mh(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NAN"}};if(ph(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mh(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NAN"}};if(ph(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(n.field),op:LI(n.op),value:n.value}}}(e):e instanceof Se?function(n){const r=n.getFilters().map(s=>am(s));return r.length===1?r[0]:{compositeFilter:{op:FI(n.op),filters:r}}}(e):z()}function UI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function lm(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t,n,r,s,i=G.min(),o=G.min(),a=Yt.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new hn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.ut=t}}function $I(e){const t=NI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?il(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.on=new qI}addToCollectionParentIndex(t,n){return this.on.add(n),R.resolve()}getCollectionParents(t,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return R.resolve()}deleteFieldIndex(t,n){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,n){return R.resolve()}getDocumentsMatchingTarget(t,n){return R.resolve(null)}getIndexType(t,n){return R.resolve(0)}getFieldIndexes(t,n){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,n){return R.resolve(Tn.min())}getMinOffsetFromCollectionGroup(t,n){return R.resolve(Tn.min())}updateCollectionGroup(t,n,r){return R.resolve()}updateIndexEntries(t,n){return R.resolve()}}class qI{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ut(_t.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ut(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Pr(0)}static Nn(){return new Pr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.changes=new Fr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,zt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&hs(r.mutation,s,fe.empty(),Pt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Z()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Z()){const s=Mn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=ts();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Mn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Z()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=Ze();const o=us(),a=function(){return us()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Cn)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),hs(u.mutation,c,u.mutation.getFieldMask(),Pt.now())):o.set(c.key,fe.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new zI(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=us();let s=new vt((o,a)=>o-a),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||fe.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||Z()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=zp();u.forEach(f=>{if(!i.has(f)){const m=Jp(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Bp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):R.resolve(Mn());let a=-1,l=i;return o.next(c=>R.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?R.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,Z())).next(u=>({batchId:a,changes:Hp(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new j(n)).next(r=>{let s=ts();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=ts();return this.indexManager.getCollectionParents(t,i).next(a=>R.forEach(a,l=>{const c=function(h,f){return new Ws(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,zt.newInvalidDocument(u)))});let a=ts();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&hs(u.mutation,c,fe.empty(),Pt.now()),No(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(s){return{id:s.id,version:s.version,createTime:je(s.createTime)}}(n)),R.resolve()}getNamedQuery(t,n){return R.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(s){return{name:s.name,query:$I(s.bundledQuery),readTime:je(s.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.overlays=new vt(j.comparator),this.lr=new Map}getOverlay(t,n){return R.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Mn();return R.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.lt(t,n,i)}),R.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.lr.delete(r)),R.resolve()}getOverlaysForCollection(t,n,r){const s=Mn(),i=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return R.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new vt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Mn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Mn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return R.resolve(a)}lt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _I(n,r));let i=this.lr.get(n);i===void 0&&(i=Z(),this.lr.set(n,i)),this.lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.hr=new Ut(Vt.Pr),this.Ir=new Ut(Vt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Vt(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Vt(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new j(new _t([])),r=new Vt(n,t),s=new Vt(n,t+1),i=[];return this.Ir.forEachInRange([r,s],o=>{this.dr(o),i.push(o.key)}),i}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new j(new _t([])),r=new Vt(n,t),s=new Vt(n,t+1);let i=Z();return this.Ir.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Vt(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Vt{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return j.comparator(t.key,n.key)||rt(t.gr,n.gr)}static Tr(t,n){return rt(t.gr,n.gr)||j.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ut(Vt.Pr)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gI(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.yr=this.yr.add(new Vt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Sr(r),i=s<0?0:s;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Vt(n,0),s=new Vt(n,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([r,s],o=>{const a=this.wr(o.gr);i.push(a)}),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ut(rt);return n.forEach(s=>{const i=new Vt(s,0),o=new Vt(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([i,o],a=>{r=r.add(a.gr)})}),R.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;j.isDocumentKey(i)||(i=i.child(""));const o=new Vt(new j(i),0);let a=new Ut(rt);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.gr)),!0)},o),R.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const s=this.wr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){yt(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return R.forEach(n.mutations,s=>{const i=new Vt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Vt(n,0),s=this.yr.firstAfterOrEqual(r);return R.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.Cr=t,this.docs=function(){return new vt(j.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(t,n){let r=Ze();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():zt.newInvalidDocument(s))}),R.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=Ze();const o=n.path,a=new j(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Mw(Ow(u),r)<=0||(s.has(u.key)||No(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(t,n,r,s){z()}vr(t,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new YI(this)}getSize(t){return R.resolve(this.size)}}class YI extends HI{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this._r.addEntry(t,s)):this._r.removeEntry(r)}),R.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this.persistence=t,this.Fr=new Fr(n=>fc(n),dc),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Mr=0,this.Or=new yc,this.targetCount=0,this.Nr=Pr.On()}forEachTarget(t,n){return this.Fr.forEach((r,s)=>n(s)),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),R.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new Pr(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(t,n){return this.kn(n),R.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),R.waitFor(i).next(()=>s)}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return R.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),R.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),R.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return R.resolve(r)}containsKey(t,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n){this.Br={},this.overlays={},this.Lr=new lc(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new JI(this),this.indexManager=new jI,this.remoteDocumentCache=function(s){return new XI(s)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new BI(n),this.Kr=new WI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new GI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new QI(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){L("MemoryPersistence","Starting transaction:",t);const s=new tA(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(i=>this.referenceDelegate.Ur(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Wr(t,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class tA extends Fw{constructor(t){super(),this.currentSequenceNumber=t}}class Ec{constructor(t){this.persistence=t,this.Gr=new yc,this.zr=null}static jr(t){return new Ec(t)}get Hr(){if(this.zr)return this.zr;throw z()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),R.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Hr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,r=>{const s=j.fromPath(r);return this.Jr(t,s).next(i=>{i||n.removeEntry(s,G.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=s}static Qi(t,n){let r=Z(),s=Z();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vc(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.zi(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ji(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new eA;return this.Hi(t,n,o).next(a=>{if(i.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>i.result)}Ji(t,n,r,s){return r.documentReadCount<this.Ui?(Gr()<=nt.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Gr()<=nt.DEBUG&&L("QueryEngine","Query:",or(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(Gr()<=nt.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$e(n))):R.resolve())}zi(t,n){if(Eh(n))return R.resolve(null);let r=$e(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=il(n,null,"F"),r=$e(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=Z(...i);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(t,il(n,null,"F")):this.Xi(t,c,n,l)}))})))}ji(t,n,r,s){return Eh(n)||s.isEqual(G.min())?R.resolve(null):this.Gi.getDocuments(t,r).next(i=>{const o=this.Yi(n,i);return this.Zi(n,o,r,s)?R.resolve(null):(Gr()<=nt.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),or(n)),this.Xi(t,o,n,Nw(s,-1)).next(a=>a))})}Yi(t,n){let r=new Ut(jp(t));return n.forEach((s,i)=>{No(t,i)&&(r=r.add(i))}),r}Zi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Hi(t,n,r){return Gr()<=nt.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",or(n)),this.Gi.getDocumentsMatchingQuery(t,n,Tn.min(),r)}Xi(t,n,r,s){return this.Gi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,n,r,s){this.persistence=t,this.es=n,this.serializer=s,this.ts=new vt(rt),this.ns=new Fr(i=>fc(i),dc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KI(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function sA(e,t,n,r){return new rA(e,t,n,r)}async function cm(e,t){const n=Y(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Z();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function iA(e,t){const n=Y(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=R.resolve();return f.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(I=>{const w=c.docVersions.get(y);yt(w!==null),I.version.compareTo(w)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),u.addEntry(I)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Z();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function um(e){const t=Y(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function oA(e,t){const n=Y(e),r=t.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(Yt.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(I,w,P){return I.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(f,m,u)&&a.push(n.qr.updateTargetData(i,m))});let l=Ze(),c=Z();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(aA(i,o,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!r.isEqual(G.min())){const u=n.qr.getLastRemoteSnapshotVersion(i).next(h=>n.qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return R.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ts=s,i))}function aA(e,t,n){let r=Z(),s=Z();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=Ze();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(G.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:s}})}function lA(e,t){const n=Y(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function cA(e,t){const n=Y(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.qr.getTargetData(r,t).next(i=>i?(s=i,R.resolve(s)):n.qr.allocateTargetId(r).next(o=>(s=new hn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function ul(e,t,n){const r=Y(e),s=r.ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ks(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(s.target)}function kh(e,t,n){const r=Y(e);let s=G.min(),i=Z();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Y(l),f=h.ns.get(u);return f!==void 0?R.resolve(h.ts.get(f)):h.qr.getTargetData(c,u)}(r,o,$e(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?s:G.min(),n?i:Z())).next(a=>(uA(r,eI(t),a),{documents:a,ls:i})))}function uA(e,t,n){let r=e.rs.get(t)||G.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.rs.set(t,r)}class Vh{constructor(){this.activeTargetIds=aI()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hA{constructor(){this.eo=new Vh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new Vh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi=null;function pa(){return pi===null?pi=function(){return 268435456+Math.round(2147483648*Math.random())}():pi++,"0x"+pi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class mA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${s}/databases/${i}`,this.po=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get yo(){return!1}wo(n,r,s,i,o){const a=pa(),l=this.So(n,r);L("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,i,o),this.Do(n,l,c,s).then(u=>(L("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ar("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Co(n,r,s,i,o,a){return this.wo(n,r,s,i,o)}bo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}So(n,r){const s=dA[n];return`${this.mo}/v1/${r}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,s){const i=pa();return new Promise((o,a)=>{const l=new Iw;l.setWithCredentials(!0),l.listenOnce(vw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fa.NO_ERROR:const u=l.getResponseJson();L(jt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case fa.TIMEOUT:L(jt,`RPC '${t}' ${i} timed out`),a(new M(v.DEADLINE_EXCEEDED,"Request time out"));break;case fa.HTTP_ERROR:const h=l.getStatus();if(L(jt,`RPC '${t}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(w){const P=w.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(P)>=0?P:v.UNKNOWN}(m.status);a(new M(y,m.message))}else a(new M(v.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(v.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{L(jt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);L(jt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}vo(t,n,r){const s=pa(),i=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=yw(),a=Ew(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new ww({})),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");L(jt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,m=!1;const y=new pA({co:w=>{m?L(jt,`Not sending because RPC '${t}' stream ${s} is closed:`,w):(f||(L(jt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),L(jt,`RPC '${t}' stream ${s} sending:`,w),h.send(w))},lo:()=>h.close()}),I=(w,P,x)=>{w.listen(P,B=>{try{x(B)}catch(D){setTimeout(()=>{throw D},0)}})};return I(h,hi.EventType.OPEN,()=>{m||L(jt,`RPC '${t}' stream ${s} transport opened.`)}),I(h,hi.EventType.CLOSE,()=>{m||(m=!0,L(jt,`RPC '${t}' stream ${s} transport closed`),y.Ro())}),I(h,hi.EventType.ERROR,w=>{m||(m=!0,Ar(jt,`RPC '${t}' stream ${s} transport errored:`,w),y.Ro(new M(v.UNAVAILABLE,"The operation could not be completed")))}),I(h,hi.EventType.MESSAGE,w=>{var P;if(!m){const x=w.data[0];yt(!!x);const B=x,D=B.error||((P=B[0])===null||P===void 0?void 0:P.error);if(D){L(jt,`RPC '${t}' stream ${s} received error:`,D);const ht=D.status;let pt=function(nn){const ce=Rt[nn];if(ce!==void 0)return tm(ce)}(ht),Jt=D.message;pt===void 0&&(pt=v.INTERNAL,Jt="Unknown error status: "+ht+" with message "+D.message),m=!0,y.Ro(new M(pt,Jt)),h.close()}else L(jt,`RPC '${t}' stream ${s} received:`,x),y.Vo(x)}}),I(a,Tw.STAT_EVENT,w=>{w.stat===lh.PROXY?L(jt,`RPC '${t}' stream ${s} detected buffering proxy`):w.stat===lh.NOPROXY&&L(jt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.Ao()},0),y}}function ma(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(e){return new CI(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t,n,r=1e3,s=1.5,i=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=s,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&L("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t,n,r,s,i,o,a,l){this.si=t,this.Ko=r,this.$o=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new hm(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(Je(n.toString()),Je("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===n&&this.s_(r,s)},r=>{t(()=>{const s=new M(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return L("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gA extends fm{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=SI(this.serializer,t),r=function(i){if(!("targetChange"in i))return G.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?G.min():o.readTime?je(o.readTime):G.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=cl(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=rl(l)?{documents:DI(i,l)}:{query:xI(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rm(i,o.resumeToken);const c=ol(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(G.min())>0){a.readTime=Yi(i,o.snapshotVersion.toTimestamp());const c=ol(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=OI(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=cl(this.serializer),n.removeTarget=t,this.e_(n)}}class _A extends fm{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=VI(t.writeResults,t.commitTime),r=je(t.commitTime);return this.listener.I_(r,n)}return yt(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=cl(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>kI(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.wo(t,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(v.UNKNOWN,s.toString())})}Co(t,n,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(t,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(v.UNKNOWN,i.toString())})}terminate(){this.d_=!0}}class EA{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Je(n),this.f_=!1):L("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro(o=>{r.enqueueAndForget(async()=>{Yn(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Y(l);c.C_.add(4),await Xs(c),c.M_.set("Unknown"),c.C_.delete(4),await Uo(c)}(this))})}),this.M_=new EA(r,s)}}async function Uo(e){if(Yn(e))for(const t of e.v_)await t(!0)}async function Xs(e){for(const t of e.v_)await t(!1)}function dm(e,t){const n=Y(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Ic(n)?wc(n):Ur(n).Ho()&&Tc(n,t))}function pm(e,t){const n=Y(e),r=Ur(n);n.D_.delete(t),r.Ho()&&mm(n,t),n.D_.size===0&&(r.Ho()?r.Zo():Yn(n)&&n.M_.set("Unknown"))}function Tc(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(G.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ur(e).u_(t)}function mm(e,t){e.x_.Oe(t),Ur(e).c_(t)}function wc(e){e.x_=new wI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Ur(e).start(),e.M_.g_()}function Ic(e){return Yn(e)&&!Ur(e).jo()&&e.D_.size>0}function Yn(e){return Y(e).C_.size===0}function gm(e){e.x_=void 0}async function TA(e){e.D_.forEach((t,n)=>{Tc(e,t)})}async function wA(e,t){gm(e),Ic(e)?(e.M_.w_(t),wc(e)):e.M_.set("Unknown")}async function IA(e,t,n){if(e.M_.set("Online"),t instanceof nm&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.D_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.D_.delete(a),s.x_.removeTarget(a))}(e,t)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ji(e,r)}else if(t instanceof bi?e.x_.$e(t):t instanceof em?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(G.min()))try{const r=await um(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.D_.get(c);u&&i.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.D_.get(l);if(!u)return;i.D_.set(l,u.withResumeToken(Yt.EMPTY_BYTE_STRING,u.snapshotVersion)),mm(i,l);const h=new hn(u.target,l,c,u.sequenceNumber);Tc(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){L("RemoteStore","Failed to raise snapshot:",r),await Ji(e,r)}}async function Ji(e,t,n){if(!Ks(t))throw t;e.C_.add(1),await Xs(e),e.M_.set("Offline"),n||(n=()=>um(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Uo(e)})}function _m(e,t){return t().catch(n=>Ji(e,n,t))}async function Bo(e){const t=Y(e),n=In(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;AA(t);)try{const s=await lA(t.localStore,r);if(s===null){t.b_.length===0&&n.Zo();break}r=s.batchId,RA(t,s)}catch(s){await Ji(t,s)}ym(t)&&Em(t)}function AA(e){return Yn(e)&&e.b_.length<10}function RA(e,t){e.b_.push(t);const n=In(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function ym(e){return Yn(e)&&!In(e).jo()&&e.b_.length>0}function Em(e){In(e).start()}async function CA(e){In(e).E_()}async function bA(e){const t=In(e);for(const n of e.b_)t.P_(n.mutations)}async function PA(e,t,n){const r=e.b_.shift(),s=mc.from(r,t,n);await _m(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Bo(e)}async function SA(e,t){t&&In(e).h_&&await async function(r,s){if(function(o){return EI(o)&&o!==v.ABORTED}(s.code)){const i=r.b_.shift();In(r).Yo(),await _m(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bo(r)}}(e,t),ym(e)&&Em(e)}async function xh(e,t){const n=Y(e);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const r=Yn(n);n.C_.add(3),await Xs(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Uo(n)}async function kA(e,t){const n=Y(e);t?(n.C_.delete(2),await Uo(n)):t||(n.C_.add(2),await Xs(n),n.M_.set("Unknown"))}function Ur(e){return e.O_||(e.O_=function(n,r,s){const i=Y(n);return i.A_(),new gA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:TA.bind(null,e),Io:wA.bind(null,e),a_:IA.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),Ic(e)?wc(e):e.M_.set("Unknown")):(await e.O_.stop(),gm(e))})),e.O_}function In(e){return e.N_||(e.N_=function(n,r,s){const i=Y(n);return i.A_(),new _A(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:CA.bind(null,e),Io:SA.bind(null,e),T_:bA.bind(null,e),I_:PA.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await Bo(e)):(await e.N_.stop(),e.b_.length>0&&(L("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Ac(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rc(e,t){if(Je("AsyncQueue",`${t}: ${e}`),Ks(e))return new M(v.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=ts(),this.sortedSet=new vt(this.comparator)}static emptySet(t){return new gr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof gr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new gr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(){this.B_=new vt(j.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):z():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Sr{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sr(t,n,gr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.k_=void 0,this.listeners=[]}}class DA{constructor(){this.queries=new Fr(t=>$p(t),xo),this.onlineState="Unknown",this.q_=new Set}}async function xA(e,t){const n=Y(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new VA),s)try{i.k_=await n.onListen(r)}catch(o){const a=Rc(o,`Initialization of query '${or(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.listeners.push(t),t.Q_(n.onlineState),i.k_&&t.K_(i.k_)&&Cc(n)}async function NA(e,t){const n=Y(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(t);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function OA(e,t){const n=Y(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.K_(s)&&(r=!0);o.k_=s}}r&&Cc(n)}function MA(e,t,n){const r=Y(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function Cc(e){e.q_.forEach(t=>{t.next()})}class LA{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Sr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=Sr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t){this.key=t}}class Tm{constructor(t){this.key=t}}class FA{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Z(),this.mutatedKeys=Z(),this._a=jp(t),this.aa=new gr(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new Nh,s=n?n.aa:this.aa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),m=No(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),I=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let w=!1;f&&m?f.data.isEqual(m.data)?y!==I&&(r.track({type:3,doc:m}),w=!0):this.ha(f,m)||(r.track({type:2,doc:m}),w=!0,(l&&this._a(m,l)>0||c&&this._a(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),w=!0):f&&!m&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(m?(o=o.add(m),i=I?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{aa:o,la:r,Zi:a,mutatedKeys:i}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const i=t.la.L_();i.sort((c,u)=>function(f,m){const y=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return y(f)-y(m)}(c.type,u.type)||this._a(c.doc,u.doc)),this.Pa(r);const o=n?this.Ia():[],a=this.oa.size===0&&this.current?1:0,l=a!==this.sa;return this.sa=a,i.length!==0||l?{snapshot:new Sr(this.query,t.aa,s,i,t.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Nh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=Z(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new Tm(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new vm(r))}),n}da(t){this.ia=t.ls,this.oa=Z();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return Sr.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class UA{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class BA{constructor(t){this.key=t,this.Ra=!1}}class $A{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Fr(a=>$p(a),xo),this.fa=new Map,this.ga=new Set,this.pa=new vt(j.comparator),this.ya=new Map,this.wa=new yc,this.Sa={},this.ba=new Map,this.Da=Pr.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function jA(e,t){const n=JA(e);let r,s;const i=n.ma.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Aa();else{const o=await cA(n.localStore,$e(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await qA(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&dm(n.remoteStore,o)}return s}async function qA(e,t,n,r,s){e.va=(h,f,m)=>async function(I,w,P,x){let B=w.view.ca(P);B.Zi&&(B=await kh(I.localStore,w.query,!1).then(({documents:pt})=>w.view.ca(pt,B)));const D=x&&x.targetChanges.get(w.targetId),ht=w.view.applyChanges(B,I.isPrimaryClient,D);return Mh(I,w.targetId,ht.Ta),ht.snapshot}(e,h,f,m);const i=await kh(e.localStore,t,!0),o=new FA(t,i.ls),a=o.ca(i.documents),l=Qs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);Mh(e,n,c.Ta);const u=new UA(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function HA(e,t){const n=Y(e),r=n.ma.get(t),s=n.fa.get(r.targetId);if(s.length>1)return n.fa.set(r.targetId,s.filter(i=>!xo(i,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ul(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),pm(n.remoteStore,r.targetId),hl(n,r.targetId)}).catch(zs)):(hl(n,r.targetId),await ul(n.localStore,r.targetId,!0))}async function zA(e,t,n){const r=ZA(e);try{const s=await function(o,a){const l=Y(o),c=Pt.now(),u=a.reduce((m,y)=>m.add(y.key),Z());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Ze(),I=Z();return l.ss.getEntries(m,u).next(w=>{y=w,y.forEach((P,x)=>{x.isValidDocument()||(I=I.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(w=>{h=w;const P=[];for(const x of a){const B=pI(x,h.get(x.key).overlayedDocument);B!=null&&P.push(new Cn(x.key,B,Dp(B.value.mapValue),Ce.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,P,a)}).next(w=>{f=w;const P=w.applyToLocalDocumentSet(h,I);return l.documentOverlayCache.saveOverlays(m,w.batchId,P)})}).then(()=>({batchId:f.batchId,changes:Hp(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new vt(rt)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(r,s.batchId,n),await Ys(r,s.changes),await Bo(r.remoteStore)}catch(s){const i=Rc(s,"Failed to persist write");n.reject(i)}}async function wm(e,t){const n=Y(e);try{const r=await oA(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.ya.get(i);o&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ra=!0:s.modifiedDocuments.size>0?yt(o.Ra):s.removedDocuments.size>0&&(yt(o.Ra),o.Ra=!1))}),await Ys(n,r,t)}catch(r){await zs(r)}}function Oh(e,t,n){const r=Y(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ma.forEach((i,o)=>{const a=o.view.Q_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Y(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.listeners)f.Q_(a)&&(c=!0)}),c&&Cc(l)}(r.eventManager,t),s.length&&r.Va.a_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function KA(e,t,n){const r=Y(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.ya.get(t),i=s&&s.key;if(i){let o=new vt(j.comparator);o=o.insert(i,zt.newNoDocument(i,G.min()));const a=Z().add(i),l=new Lo(G.min(),new Map,new vt(rt),o,a);await wm(r,l),r.pa=r.pa.remove(i),r.ya.delete(t),bc(r)}else await ul(r.localStore,t,!1).then(()=>hl(r,t,n)).catch(zs)}async function WA(e,t){const n=Y(e),r=t.batch.batchId;try{const s=await iA(n.localStore,t);Am(n,r,null),Im(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ys(n,s)}catch(s){await zs(s)}}async function GA(e,t,n){const r=Y(e);try{const s=await function(o,a){const l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(yt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);Am(r,t,n),Im(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ys(r,s)}catch(s){await zs(s)}}function Im(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function Am(e,t,n){const r=Y(e);let s=r.Sa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Sa[r.currentUser.toKey()]=s}}function hl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||Rm(e,r)})}function Rm(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(pm(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),bc(e))}function Mh(e,t,n){for(const r of n)r instanceof vm?(e.wa.addReference(r.key,t),QA(e,r)):r instanceof Tm?(L("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||Rm(e,r.key)):z()}function QA(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(L("SyncEngine","New document in limbo: "+n),e.ga.add(r),bc(e))}function bc(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new j(_t.fromString(t)),r=e.Da.next();e.ya.set(r,new BA(n)),e.pa=e.pa.insert(n,r),dm(e.remoteStore,new hn($e(Up(n.path)),r,"TargetPurposeLimboResolution",lc._e))}}async function Ys(e,t,n){const r=Y(e),s=[],i=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=vc.Qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Va.a_(s),await async function(l,c){const u=Y(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>R.forEach(c,f=>R.forEach(f.ki,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>R.forEach(f.qi,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ks(h))throw h;L("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.ts.get(f),y=m.snapshotVersion,I=m.withLastLimboFreeSnapshotVersion(y);u.ts=u.ts.insert(f,I)}}}(r.localStore,i))}async function XA(e,t){const n=Y(e);if(!n.currentUser.isEqual(t)){L("SyncEngine","User change. New user:",t.toKey());const r=await cm(n.localStore,t);n.currentUser=t,function(i,o){i.ba.forEach(a=>{a.forEach(l=>{l.reject(new M(v.CANCELLED,o))})}),i.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ys(n,r._s)}}function YA(e,t){const n=Y(e),r=n.ya.get(t);if(r&&r.Ra)return Z().add(r.key);{let s=Z();const i=n.fa.get(t);if(!i)return s;for(const o of i){const a=n.ma.get(o);s=s.unionWith(a.view.ua)}return s}}function JA(e){const t=Y(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KA.bind(null,t),t.Va.a_=OA.bind(null,t.eventManager),t.Va.Fa=MA.bind(null,t.eventManager),t}function ZA(e){const t=Y(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GA.bind(null,t),t}class Lh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Fo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return sA(this.persistence,new nA,t.initialUser,this.serializer)}createPersistence(t){return new ZI(Ec.jr,this.serializer)}createSharedClientState(t){return new hA}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class t0{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Oh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XA.bind(null,this.syncEngine),await kA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new DA}()}createDatastore(t){const n=Fo(t.databaseInfo.databaseId),r=function(i){return new mA(i)}(t.databaseInfo);return function(i,o,a,l){return new yA(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new vA(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Oh(this.syncEngine,n,0),function(){return Dh.D()?new Dh:new fA}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const h=new $A(s,i,o,a,l,c);return u&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=Y(n);L("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await Xs(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):Je("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=qt.UNAUTHENTICATED,this.clientId=Sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{L("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(L("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Rc(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function ga(e,t){e.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cm(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Fh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await s0(e);L("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(s=>xh(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>xh(t.remoteStore,i)),e._onlineComponents=t}function r0(e){return e.name==="FirebaseError"?e.code===v.FAILED_PRECONDITION||e.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function s0(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await ga(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!r0(n))throw n;Ar("Error using user provided cache. Falling back to memory cache: "+n),await ga(e,new Lh)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await ga(e,new Lh);return e._offlineComponents}async function Cm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await Fh(e,e._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await Fh(e,new t0))),e._onlineComponents}function i0(e){return Cm(e).then(t=>t.syncEngine)}async function o0(e){const t=await Cm(e),n=t.eventManager;return n.onListen=jA.bind(null,t.syncEngine),n.onUnlisten=HA.bind(null,t.syncEngine),n}function a0(e,t,n={}){const r=new _n;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new e0({next:f=>{o.enqueueAndForget(()=>NA(i,h)),f.fromCache&&l.source==="server"?c.reject(new M(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new LA(a,u,{includeMetadataChanges:!0,J_:!0});return xA(i,h)}(await o0(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(e,t,n){if(!n)throw new M(v.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function l0(e,t,n,r){if(t===!0&&r===!0)throw new M(v.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Bh(e){if(!j.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $h(e){if(j.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $o(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":z()}function Kn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$o(e);throw new M(v.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}l0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bm((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class jo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jh(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rw;switch(r.type){case"firstParty":return new Sw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Uh.get(n);r&&(L("ComponentProvider","Removing Datastore"),Uh.delete(n),r.terminate())}(this),Promise.resolve()}}function c0(e,t,n,r={}){var s;const i=(e=Kn(e,jo))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=qt.MOCK_USER;else{a=md(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qt(c)}e._authCredentials=new Cw(new Pp(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Br(this.firestore,t,this._query)}}class pe{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new pe(this.firestore,t,this._key)}}class yn extends Br{constructor(t,n,r){super(t,n,Up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new pe(this.firestore,null,new j(t))}withConverter(t){return new yn(this.firestore,t,this._path)}}function fl(e,t,...n){if(e=me(e),Pm("collection","path",t),e instanceof jo){const r=_t.fromString(t,...n);return $h(r),new yn(e,null,r)}{if(!(e instanceof pe||e instanceof yn))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_t.fromString(t,...n));return $h(r),new yn(e.firestore,null,r)}}function u0(e,t,...n){if(e=me(e),arguments.length===1&&(t=Sp.newId()),Pm("doc","path",t),e instanceof jo){const r=_t.fromString(t,...n);return Bh(r),new pe(e,null,new j(r))}{if(!(e instanceof pe||e instanceof yn))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_t.fromString(t,...n));return Bh(r),new pe(e.firestore,e instanceof yn?e.converter:null,new j(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new hm(this,"async_queue_retry"),this.iu=()=>{const n=ma();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=ma();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=ma();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new _n;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!Ks(t))throw t;L("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Je("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const s=Ac.createAndSchedule(this,t,n,r,i=>this.au(i));return this.Xa.push(s),s}su(){this.eu&&z()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}class Js extends jo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new h0}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||km(this),this._firestoreClient.terminate()}}function f0(e,t){const n=typeof e=="object"?e:Id(),r=typeof e=="string"?e:t||"(default)",s=vd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dd("firestore");i&&c0(s,...i)}return s}function Sm(e){return e._firestoreClient||km(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function km(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new $w(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,bm(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new n0(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kr(Yt.fromBase64String(t))}catch(n){throw new M(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new kr(Yt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rt(this._lat,t._lat)||rt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=/^__.*__$/;class p0{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Cn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Gs(t,this.data,n,this.fieldTransforms)}}class Vm{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Cn(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class kc{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new kc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Au(t),s}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Zi(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(Dm(this.Iu)&&d0.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class m0{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Fo(t)}pu(t,n,r,s=!1){return new kc({Iu:t,methodName:n,gu:r,path:Lt.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vc(e){const t=e._freezeSettings(),n=Fo(e._databaseId);return new m0(e._databaseId,!!t.ignoreUndefinedProperties,n)}function g0(e,t,n,r,s,i={}){const o=e.pu(i.merge||i.mergeFields?2:0,t,n,s);Dc("Data must be an object, but it was:",o,r);const a=xm(r,o);let l,c;if(i.merge)l=new fe(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=dl(t,h,n);if(!o.contains(f))throw new M(v.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Om(u,f)||u.push(f)}l=new fe(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new p0(new ae(a),l,c)}class Ho extends Pc{_toFieldTransform(t){if(t.Iu!==2)throw t.Iu===1?t.mu(`${this._methodName}() can only appear at the top level of your update data`):t.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ho}}function _0(e,t,n,r){const s=e.pu(1,t,n);Dc("Data must be an object, but it was:",s,r);const i=[],o=ae.empty();Xn(r,(l,c)=>{const u=xc(t,l,n);c=me(c);const h=s.Ru(u);if(c instanceof Ho)i.push(u);else{const f=Zs(c,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new fe(i);return new Vm(o,a,s.fieldTransforms)}function y0(e,t,n,r,s,i){const o=e.pu(1,t,n),a=[dl(t,r,n)],l=[s];if(i.length%2!=0)throw new M(v.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(dl(t,i[f])),l.push(i[f+1]);const c=[],u=ae.empty();for(let f=a.length-1;f>=0;--f)if(!Om(c,a[f])){const m=a[f];let y=l[f];y=me(y);const I=o.Ru(m);if(y instanceof Ho)c.push(m);else{const w=Zs(y,I);w!=null&&(c.push(m),u.set(m,w))}}const h=new fe(c);return new Vm(u,h,o.fieldTransforms)}function E0(e,t,n,r=!1){return Zs(n,e.pu(r?4:3,t))}function Zs(e,t){if(Nm(e=me(e)))return Dc("Unsupported field value:",t,e),xm(e,t);if(e instanceof Pc)return function(r,s){if(!Dm(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Zs(a,s.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pt.fromDate(r);return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Pt){const i=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yi(s.serializer,i)}}if(r instanceof Sc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:rm(s.serializer,r._byteString)};if(r instanceof pe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_c(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${$o(r)}`)}(e,t)}function xm(e,t){const n={};return kp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xn(e,(r,s)=>{const i=Zs(s,t.Eu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pt||e instanceof Sc||e instanceof kr||e instanceof pe||e instanceof Pc)}function Dc(e,t,n){if(!Nm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$o(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function dl(e,t,n){if((t=me(t))instanceof qo)return t._internalPath;if(typeof t=="string")return xc(e,t);throw Zi("Field path arguments must be of type string or ",e,!1,void 0,n)}const v0=new RegExp("[~\\*/\\[\\]]");function xc(e,t,n){if(t.search(v0)>=0)throw Zi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new qo(...t.split("."))._internalPath}catch{throw Zi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zi(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(v.INVALID_ARGUMENT,a+e+l)}function Om(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new T0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Nc("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class T0 extends Mm{data(){return super.data()}}function Nc(e,t){return typeof t=="string"?xc(e,t):t instanceof qo?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Oc{}class I0 extends Oc{}function A0(e,t,...n){let r=[];t instanceof Oc&&r.push(t),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Mc).length,a=i.filter(l=>l instanceof zo).length;if(o>1||o>0&&a>0)throw new M(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class zo extends I0{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new zo(t,n,r)}_apply(t){const n=this._parse(t);return Lm(t._query,n),new Br(t.firestore,t.converter,sl(t._query,n))}_parse(t){const n=Vc(t.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Hh(h,u);const m=[];for(const y of h)m.push(qh(l,i,y));f={arrayValue:{values:m}}}else f=qh(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Hh(h,u),f=E0(a,o,h,u==="in"||u==="not-in");return bt.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function R0(e,t,n){const r=t,s=Nc("where",e);return zo._create(s,r,n)}class Mc extends Oc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Mc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Lm(o,l),o=sl(o,l)}(t._query,n),new Br(t.firestore,t.converter,sl(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qh(e,t,n){if(typeof(n=me(n))=="string"){if(n==="")throw new M(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bp(t)&&n.indexOf("/")!==-1)throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(_t.fromString(n));if(!j.isDocumentKey(r))throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dh(e,new j(r))}if(n instanceof pe)return dh(e,n._key);throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$o(n)}.`)}function Hh(e,t){if(!Array.isArray(e)||e.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Lm(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class C0{convertValue(t,n="none"){switch(zn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ct(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Hn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw z()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Xn(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Sc(Ct(t.latitude),Ct(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=uc(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ks(t));default:return null}}convertTimestamp(t){const n=wn(t);return new Pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=_t.fromString(t);yt(lm(r));const s=new Vs(r.get(1),r.get(3)),i=new j(r.popFirst(5));return s.isEqual(n)||Je(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class P0 extends Mm{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Nc("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pi extends P0{data(t={}){return super.data(t)}}class S0{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new mi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Pi(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Pi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new mi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Pi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new mi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:k0(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function k0(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class V0 extends C0{constructor(t){super(),this.firestore=t}convertBytes(t){return new kr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new pe(this.firestore,null,n)}}function D0(e){e=Kn(e,Br);const t=Kn(e.firestore,Js),n=Sm(t),r=new V0(t);return w0(e._query),a0(n,e._query).then(s=>new S0(t,r,e,s))}function eb(e,t,n,...r){e=Kn(e,pe);const s=Kn(e.firestore,Js),i=Vc(s);let o;return o=typeof(t=me(t))=="string"||t instanceof qo?y0(i,"updateDoc",e._key,t,n,r):_0(i,"updateDoc",e._key,t),Lc(s,[o.toMutation(e._key,Ce.exists(!0))])}function nb(e){return Lc(Kn(e.firestore,Js),[new pc(e._key,Ce.none())])}function x0(e,t){const n=Kn(e.firestore,Js),r=u0(e),s=b0(e.converter,t);return Lc(n,[g0(Vc(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Ce.exists(!1))]).then(()=>r)}function Lc(e,t){return function(r,s){const i=new _n;return r.asyncQueue.enqueueAndForget(async()=>zA(await i0(r),s,i)),i.promise}(Sm(e),t)}(function(t,n=!0){(function(s){Lr=s})(Td),Es(new wr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Js(new bw(r.getProvider("auth-internal")),new Vw(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vs(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gn(ch,"4.3.2",t),gn(ch,"4.3.2","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="firebasestorage.googleapis.com",Um="storageBucket",N0=2*60*1e3,O0=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It extends Gn{constructor(t,n,r=0){super(_a(t),`Firebase Storage: ${n} (${_a(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,It.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _a(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wt;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wt||(wt={}));function _a(e){return"storage/"+e}function Fc(){const e="An unknown error occurred, please check the error payload for server response.";return new It(wt.UNKNOWN,e)}function M0(e){return new It(wt.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function L0(e){return new It(wt.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function F0(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new It(wt.UNAUTHENTICATED,e)}function U0(){return new It(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function B0(e){return new It(wt.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function $0(){return new It(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function j0(){return new It(wt.CANCELED,"User canceled the upload/download.")}function q0(e){return new It(wt.INVALID_URL,"Invalid URL '"+e+"'.")}function H0(e){return new It(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function z0(){return new It(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Um+"' property when initializing the app?")}function K0(){return new It(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W0(){return new It(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G0(e){return new It(wt.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pl(e){return new It(wt.INVALID_ARGUMENT,e)}function Bm(){return new It(wt.APP_DELETED,"The Firebase app was deleted.")}function Q0(e){return new It(wt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fs(e,t){return new It(wt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Qr(e){throw new It(wt.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=de.makeFromUrl(t,n)}catch{return new de(t,"")}if(r.path==="")return r;throw H0(t)}static makeFromUrl(t,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),y={bucket:1,path:3},I=n===Fm?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",P=new RegExp(`^https?://${I}/${s}/${w}`,"i"),B=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:c},{regex:P,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<B.length;D++){const ht=B[D],pt=ht.regex.exec(t);if(pt){const Jt=pt[ht.indices.bucket];let re=pt[ht.indices.path];re||(re=""),r=new de(Jt,re),ht.postModify(r);break}}if(r==null)throw q0(t);return r}}class X0{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(e,t,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,t.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,e(m,l())},w)}function f(){i&&clearTimeout(i)}function m(w,...P){if(c){f();return}if(w){f(),u.call(null,w,...P);return}if(l()||o){f(),u.call(null,w,...P);return}r<64&&(r*=2);let B;a===1?(a=2,B=0):B=(r+Math.random())*1e3,h(B)}let y=!1;function I(w){y||(y=!0,f(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,I(!0)},n),I}function J0(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(e){return e!==void 0}function tR(e){return typeof e=="object"&&!Array.isArray(e)}function Uc(e){return typeof e=="string"||e instanceof String}function zh(e){return Bc()&&e instanceof Blob}function Bc(){return typeof Blob<"u"&&!iv()}function Kh(e,t,n,r){if(r<t)throw pl(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw pl(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function $m(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const s=t(r)+"="+t(e[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Bn||(Bn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(t,n,r,s,i,o,a,l,c,u,h,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const t=(r,s)=>{if(s){r(!1,new gi(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Bn.NO_ERROR,l=i.getStatus();if(!a||eR(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===Bn.ABORT;r(!1,new gi(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new gi(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Z0(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Fc();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Bm():j0();o(l)}else{const l=$0();o(l)}};this.canceled_?n(!1,new gi(!1,null,!0)):this.backoffId_=Y0(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&J0(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gi{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function rR(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function sR(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function iR(e,t){t&&(e["X-Firebase-GMPID"]=t)}function oR(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function aR(e,t,n,r,s,i,o=!0){const a=$m(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return iR(c,t),rR(c,n),sR(c,i),oR(c,r),new nR(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cR(...e){const t=lR();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(Bc())return new Blob(e);throw new It(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uR(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(e){if(typeof atob>"u")throw G0("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ya{constructor(t,n){this.data=t,this.contentType=n||null}}function fR(e,t){switch(e){case Ue.RAW:return new ya(jm(t));case Ue.BASE64:case Ue.BASE64URL:return new ya(qm(e,t));case Ue.DATA_URL:return new ya(pR(t),mR(t))}throw Fc()}function jm(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const i=r,o=e.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function dR(e){let t;try{t=decodeURIComponent(e)}catch{throw fs(Ue.DATA_URL,"Malformed data URL.")}return jm(t)}function qm(e,t){switch(e){case Ue.BASE64:{const s=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(s||i)throw fs(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ue.BASE64URL:{const s=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(s||i)throw fs(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hR(t)}catch(s){throw s.message.includes("polyfill")?s:fs(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Hm{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw fs(Ue.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=gR(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function pR(e){const t=new Hm(e);return t.base64?qm(Ue.BASE64,t.rest):dR(t.rest)}function mR(e){return new Hm(e).contentType}function gR(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t,n){let r=0,s="";zh(t)?(this.data_=t,r=t.size,s=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,n){if(zh(this.data_)){const r=this.data_,s=uR(r,t,n);return s===null?null:new un(s)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new un(r,!0)}}static getBlob(...t){if(Bc()){const n=t.map(r=>r instanceof un?r.data_:r);return new un(cR.apply(null,n))}else{const n=t.map(o=>Uc(o)?fR(Ue.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new un(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(e){let t;try{t=JSON.parse(e)}catch{return null}return tR(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function yR(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Km(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(e,t){return t}class Zt{constructor(t,n,r,s){this.server=t,this.local=n||t,this.writable=!!r,this.xform=s||ER}}let _i=null;function vR(e){return!Uc(e)||e.length<2?e:Km(e)}function Wm(){if(_i)return _i;const e=[];e.push(new Zt("bucket")),e.push(new Zt("generation")),e.push(new Zt("metageneration")),e.push(new Zt("name","fullPath",!0));function t(i,o){return vR(o)}const n=new Zt("name");n.xform=t,e.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Zt("size");return s.xform=r,e.push(s),e.push(new Zt("timeCreated")),e.push(new Zt("updated")),e.push(new Zt("md5Hash",null,!0)),e.push(new Zt("cacheControl",null,!0)),e.push(new Zt("contentDisposition",null,!0)),e.push(new Zt("contentEncoding",null,!0)),e.push(new Zt("contentLanguage",null,!0)),e.push(new Zt("contentType",null,!0)),e.push(new Zt("metadata","customMetadata",!0)),_i=e,_i}function TR(e,t){function n(){const r=e.bucket,s=e.fullPath,i=new de(r,s);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function wR(e,t,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,t[o.server])}return TR(r,e),r}function Gm(e,t,n){const r=zm(t);return r===null?null:wR(e,r,n)}function IR(e,t,n,r){const s=zm(t);if(s===null||!Uc(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const u=e.bucket,h=e.fullPath,f="/b/"+o(u)+"/o/"+o(h),m=$c(f,n,r),y=$m({alt:"media",token:c});return m+y})[0]}function AR(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const i=t[s];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class Qm{constructor(t,n,r,s){this.url=t,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e){if(!e)throw Fc()}function RR(e,t){function n(r,s){const i=Gm(e,s,t);return Xm(i!==null),i}return n}function CR(e,t){function n(r,s){const i=Gm(e,s,t);return Xm(i!==null),IR(i,s,e.host,e._protocol)}return n}function Ym(e){function t(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=U0():s=F0():n.getStatus()===402?s=L0(e.bucket):n.getStatus()===403?s=B0(e.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return t}function bR(e){const t=Ym(e);function n(r,s){let i=t(r,s);return r.getStatus()===404&&(i=M0(e.path)),i.serverResponse=s.serverResponse,i}return n}function PR(e,t,n){const r=t.fullServerUrl(),s=$c(r,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,a=new Qm(s,i,CR(e,n),o);return a.errorHandler=bR(t),a}function SR(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function kR(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=SR(null,t)),r}function VR(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let B="";for(let D=0;D<2;D++)B=B+Math.random().toString().slice(2);return B}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=kR(t,r,s),u=AR(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=un.getBlob(h,r,f);if(m===null)throw K0();const y={name:c.fullPath},I=$c(i,e.host,e._protocol),w="POST",P=e.maxUploadRetryTime,x=new Qm(I,w,RR(e,n),P);return x.urlParams=y,x.headers=o,x.body=m.uploadData(),x.errorHandler=Ym(t),x}class DR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bn.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bn.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bn.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,s){if(this.sent_)throw Qr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class xR extends DR{initXhr(){this.xhr_.responseType="text"}}function Jm(){return new xR}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,n){this._service=t,n instanceof de?this._location=n:this._location=de.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Wn(t,n)}get root(){const t=new de(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Km(this._location.path)}get storage(){return this._service}get parent(){const t=_R(this._location.path);if(t===null)return null;const n=new de(this._location.bucket,t);return new Wn(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Q0(t)}}function NR(e,t,n){e._throwIfRoot("uploadBytes");const r=VR(e.storage,e._location,Wm(),new un(t,!0),n);return e.storage.makeRequestWithTokens(r,Jm).then(s=>({metadata:s,ref:e}))}function OR(e){e._throwIfRoot("getDownloadURL");const t=PR(e.storage,e._location,Wm());return e.storage.makeRequestWithTokens(t,Jm).then(n=>{if(n===null)throw W0();return n})}function MR(e,t){const n=yR(e._location.path,t),r=new de(e._location.bucket,n);return new Wn(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(e){return/^[A-Za-z]+:\/\//.test(e)}function FR(e,t){return new Wn(e,t)}function Zm(e,t){if(e instanceof jc){const n=e;if(n._bucket==null)throw z0();const r=new Wn(n,n._bucket);return t!=null?Zm(r,t):r}else return t!==void 0?MR(e,t):e}function UR(e,t){if(t&&LR(t)){if(e instanceof jc)return FR(e,t);throw pl("To use ref(service, url), the first argument must be a Storage instance.")}else return Zm(e,t)}function Wh(e,t){const n=t==null?void 0:t[Um];return n==null?null:de.makeFromBucketSpec(n,e)}function BR(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken=typeof s=="string"?s:md(s,e.app.options.projectId))}class jc{constructor(t,n,r,s,i){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Fm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N0,this._maxUploadRetryTime=O0,this._requests=new Set,s!=null?this._bucket=de.makeFromBucketSpec(s,this._host):this._bucket=Wh(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=de.makeFromBucketSpec(this._url,t):this._bucket=Wh(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Kh("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Kh("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Wn(this,t)}_makeRequest(t,n,r,s,i=!0){if(this._deleted)return new X0(Bm());{const o=aR(t,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,s).getPromise()}}const Gh="@firebase/storage",Qh="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="storage";function rb(e,t,n){return e=me(e),NR(e,t,n)}function sb(e){return e=me(e),OR(e)}function ib(e,t){return e=me(e),UR(e,t)}function $R(e=Id(),t){e=me(e);const r=vd(e,tg).getImmediate({identifier:t}),s=dd("storage");return s&&jR(r,...s),r}function jR(e,t,n,r={}){BR(e,t,n,r)}function qR(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new jc(n,r,s,t,Td)}function HR(){Es(new wr(tg,qR,"PUBLIC").setMultipleInstances(!0)),gn(Gh,Qh,""),gn(Gh,Qh,"esm2017")}HR();const zR={apiKey:"AIzaSyC86CO6SSjqIsQWBal7saC-hV_pAvQEY3M",authDomain:"mortenschokolade.firebaseapp.com",projectId:"mortenschokolade",messagingSenderId:"427824695239",appId:"1:427824695239:web:603ac1fec0ad477fa13be2",measurementId:"G-18H1B9W5C1",storageBucket:"gs://mortenschokolade.appspot.com"},eg=wd(zR);$R(eg);const ml=f0(eg),gl="footerInfo",KR=async e=>{const t=[];let n;return e?n=A0(fl(ml,gl),R0("category","==",n)):n=fl(ml,gl),await D0(n).then(r=>{r.forEach(s=>{t.push({...s.data(),id:s.id})})}).catch(()=>{console.log("getAllIformation fejlede")}),t},WR=async(e,t,n)=>{await x0(fl(ml,gl),{footerTitle:e,footerHours:t,phone:n}).then(r=>{console.log("document added: ",r)}).catch(r=>{console.log("error adding document; ",r)})},GR={getAllInformation:KR,addNewInformation:WR};const QR={class:"footerContainer"},XR=U("img",{class:"logoImage",src:Zf,alt:""},null,-1),YR={class:"footerTitle"},JR=U("br",null,null,-1),ZR={class:"footerHours"},tC=U("br",null,null,-1),eC={class:"kontakt"},nC={__name:"TheFooter",setup(e){let t=Nr([]);return Mf(async()=>{t.value=await GR.getAllInformation()}),(n,r)=>(Ht(),ye("div",QR,[XR,U("ul",null,[(Ht(!0),ye(oe,null,g_(Xe(t),s=>(Ht(),ye("li",null,[U("div",YR,vi(s.footerTitle),1),ee(),JR,U("div",ZR,vi(s.footerHours),1),tC,U("div",eC,vi(s.phone),1)]))),256))])]))}};function rC(){const e=Nr({}),t=(r,s)=>{e.value[r]=s+(e.value[r]??0)},n=he(()=>{const r=Object.values(e.value);return r.length>0?r.reduce((s,i)=>s+i):0});return{addItemToCart:t,cartItems:e,totalCartAmount:n}}const sC={__name:"App",setup(e){const t=Nr(!1),{totalCartAmount:n,addItemToCart:r}=rC(),s=i=>{t.value=i};return(i,o)=>{const a=Vl("RouterView");return Ht(),ye(oe,null,[at(GE,{isAdmin:t.value,setIsAdmin:s,totalCartAmount:Xe(n)},null,8,["isAdmin","totalCartAmount"]),U("main",null,[at(a,{isAdmin:t.value,setIsAdmin:s,addToCart:Xe(r)},null,8,["isAdmin","addToCart"])]),at(nC)],64)}}},iC="modulepreload",oC=function(e){return"/MortensChokolade/"+e},Xh={},Ea=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=oC(i),i in Xh)return;Xh[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":iC,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},aC="/MortensChokolade/assets/portrait-ca5ee228.png",lC="/MortensChokolade/assets/banner-dc270560.mp4";const cC=U("source",{src:lC,type:"video/mp4"},null,-1),uC=[cC],hC={__name:"bannerVideo",setup(e){const t=Nr(),n=()=>{t.value&&t.value.play().catch(r=>{console.error("Error playing video:",r)})};return(r,s)=>(Ht(),ye("video",{class:"bannerVideo",controls:"",ref_key:"videoElement",ref:t,onLoadeddata:n,autoplay:"",muted:"",loop:""},uC,544))}},fC="/MortensChokolade/assets/chokoBlog-15b59be1.png",dC="/MortensChokolade/assets/ecoChoko1-8744ed98.png",pC="/MortensChokolade/assets/ecoChoko2-118cd7bf.png";const mC={},gC={class:"chokoAndEcoSetup"},_C=Qf('<div class="chokoblogcomplete"><div><h2>Mortens chokolade blog</h2></div><div class="blogSetup"><div><img class="chokoBlogImage" src="'+fC+'" alt="lækker jule kakao fra Mortens chokolade"></div><div class="blogContent"><div class="blogText"><p>Julen i chokoladebutikken 2023 I år består Mortens Julekollektion af: <br> Mørk chokolade med pomerans Mørk chokolade med med praliné af råmandler og muskatnød Lys chokolade med julens krydderier Hvid chokolade a la risalamande Mørk chokolade med hjemmelavet gløgg Mørk chokolade med julesnaps <br> <br> Derudover laver vi nye jule-chokoladestænger Mørk chokolade med appelsincreme </p></div><div class="blogButtons"><button class="blogButton">Læs mere</button><button class="blogButton">Gå til blog</button></div></div></div></div><div class="ecoChokoComplete"><h2>Bæredygtig chokolade</h2><div class="ecoChokoSetup"><div class="ecoChokoimages"><img class="ecoChokoimage1" src="'+dC+'" alt="Økologisk chokolade fra Mortens chokolade"><img class="ecoChokoimage2" src="'+pC+'" alt="Økologisk chokolade fra Mortens Chokolade"></div><div class="ecoChokocontent"><div class="ecoChokoText"><p> Det er vigtigt, at os der arbejder med chokolade er med til at skabe og udvikle bæredygtighed i kakaoindustrien. Derfor er jeg glad for, at netop den chokolade jeg bruger, har holdning til netop dette. Størstedelen af verdens kakao kommer fra Vestafrika, og området står over for de mest alvorlige bæredygtighedsudfordringer i kakaoindustrien. Hele 60% af kakaolandmændene lever under fattigdomsgrænsen. </p></div><div><button class="ecoChokoButton">Læs mere</button></div></div></div></div>',2),yC=[_C];function EC(e,t){return Ht(),ye("div",gC,yC)}const vC=Os(mC,[["render",EC]]),TC="/MortensChokolade/assets/kurser1-beda9a6f.jpg",wC="/MortensChokolade/assets/kursus2-2731803d.png",IC="/MortensChokolade/assets/kursus3-c2103734.png",AC="/MortensChokolade/assets/kursus4-429ba7c7.png",RC="/MortensChokolade/assets/kursus5-972b3462.png";const CC={},bC=Qf('<div><img class="courseHeadImage" src="'+TC+'" alt="Mortens flødebolle kursus"></div><div class="completeCourse"><div class="courseText"><p> Kom til kursus hos Mortens chokolade <br> <br> Vi tilbyder flere forskellige kurser, giv dig i kast med chokolade temperering. Temperering af chokolade har fået ry for at være en mindre videnskab og utrolig svært at kaste sig ud i, men med chokolademagerens få tips og tricks er det slet ikke så svært. <br> Lav din egn flødeboller. Chokolademager Morten Aagaard vil i løbet af kurset guide deltagerne igennem hvordan man laver en lækker flødebolle helt fra bunden, som du selvfølgelig får lov til at nyde efterfølgende. <br><br> Vi tilbyder også heldagskurser, oplæg eller polterabend arrangementer. <br> <br> Vel mødt til en hyggelig aften i chokoladekøkkenet. </p><button class="courseButton">læs mere</button></div><div class="imageBlockSetup"><div class="imageBlock1"><div><img class="courseimage2" src="'+wC+'" alt="Morten laver flødeboller"><p class="courseImageButton">Flødebolle kursus</p></div><div><img class="courseimage3" src="'+IC+'" alt="kursus i chokolade temperering og fyldte chokolader"><p class="courseImageButton">Chokolade Kursus</p></div></div><div class="imageBlock2"><div><img class="courseimage4" src="'+AC+'" alt="Heldagskursus ved Mortens Chokolade"><p class="courseImageButton">Heldagskursus</p></div><div><img class="courseimage5" src="'+RC+'" alt="Læs mere om de kurser og events morten tilbyder"><p class="courseImageButton">Læs mere her</p></div></div></div></div>',2);function PC(e,t){return bC}const SC=Os(CC,[["render",PC]]),kC="/MortensChokolade/assets/chokoPlade1-cad53953.png",VC="/MortensChokolade/assets/juleCacao-b8329f74.png",DC="/MortensChokolade/assets/coffeeChoko-979e1286.png";const xC={},NC={class:"landingShopSetup"},OC=U("img",{class:"landingShopImg",src:kC,alt:"Økologisk chokoladeplade med flagesslt og rosapeber"},null,-1),MC=U("p",{class:"landingShopText"},"Shop chokoladeplader",-1),LC=U("img",{class:"landingShopImg",src:VC,alt:"Varm Schokolade fra Mortens Chokolade"},null,-1),FC=U("p",{class:"landingShopText"},"Shop varm kakao",-1),UC=U("img",{class:"landingShopImg",src:DC,alt:"Bland selv chokoladestykker med forskelligt fyld"},null,-1),BC=U("p",{class:"landingShopText"},"Shop bland selv chokolade",-1);function $C(e,t){const n=Vl("RouterLink");return Ht(),ye("div",NC,[U("div",null,[OC,at(n,{to:"/shop"},{default:Te(()=>[MC]),_:1})]),U("div",null,[LC,at(n,{to:"/shop"},{default:Te(()=>[FC]),_:1})]),U("div",null,[UC,at(n,{to:"/shop"},{default:Te(()=>[BC]),_:1})])])}const jC=Os(xC,[["render",$C]]);const ng=e=>(Pf("data-v-9bd2914d"),e=e(),Sf(),e),qC=ng(()=>U("div",{class:"landingScript"},[U("h1",{class:"landingScriptHeader"},"Prisvindende kvalitetschokolade"),U("p",{class:"landingScripttext"},"Chokoladeværksted på Vintappestræde i Odense med både klassiske chokolader og innovative smage, håndlavet på bæredygtig belgisk chokolade.")],-1)),HC=ng(()=>U("div",{class:"aboutMorten"},[U("img",{class:"aboutMortenPortrait",src:aC,alt:"Portræt af chokolademageren Morten, som er indehaver af Mortens Chokolade"}),U("p",{class:"aboutMortenText"},[ee("Morten flyttede til Odense og åbnede sin chokoladebutik i 2019, med en ambition om at Odenseanerne skulle have adgang til speciallavet chokolade, håndlavet på bæredygtig belgisk chokolade. "),U("br"),ee(),U("br"),ee(" Chokoladen blev så populær, at der var nu blev forespørgsel på en webshop, hvor man kunne få leveret chokoladen direkte hjem i stuen og man kan nu nyde Mortens lækre chokolade rundt i hele landet. "),U("br"),ee(),U("br"),ee(" Morten har en baggrund indenfor grafisk design og har brugt sin viden til udformning af Mortens Chokolades brand med inspiration fra modebranchen. "),U("br"),ee(),U("br"),ee(" Der er fokus på kvalitet, bæredygtighed og smag. Samtidig, så bruger han sin chokolade til at udfolde sig kreativt, så man får altid en unik smagsoplevelse, hver gang, uden at gå på kompromis med smag - Morten tester jævnligt sine smage, for at sikre sig kvaliteten altid er i top. ")])],-1)),zC={__name:"LandingView",setup(e){return(t,n)=>(Ht(),ye(oe,null,[at(hC),qC,at(jC),HC,at(vC),at(SC)],64))}},KC=Os(zC,[["__scopeId","data-v-9bd2914d"]]),WC=RE({history:$y("/MortensChokolade/"),routes:[{path:"",name:"landingView",component:KC},{path:"/shop",name:"shop",component:()=>Ea(()=>import("./ShopView-804fdfb7.js"),["assets/ShopView-804fdfb7.js","assets/ShopView-4fac7558.css"])},{path:"/admin",name:"admin",component:()=>Ea(()=>import("./AdminView-2ff4b819.js"),["assets/AdminView-2ff4b819.js","assets/AdminView-7661d6e4.css"])},{path:"/login",name:"Login admin",component:()=>Ea(()=>import("./AdminLoginView-9c0bfefd.js"),["assets/AdminLoginView-9c0bfefd.js","assets/AdminLoginView-5e8e52fa.css"])}]}),rg=vy(sC);rg.use(WC);rg.mount("#app");export{he as A,Ni as B,Te as C,YC as D,Tl as E,oe as F,GC as G,XC as H,at as I,GR as J,Os as _,U as a,Hr as b,ye as c,Sf as d,fl as e,x0 as f,D0 as g,u0 as h,nb as i,Mf as j,g_ as k,Xe as l,ml as m,wl as n,Ht as o,Pf as p,A0 as q,Nr as r,QC as s,vi as t,eb as u,$R as v,R0 as w,ib as x,rb as y,sb as z};
